/*!
 * State-based routing for AngularJS
 * @version v1.0.0-alpha.5
 * @link http://angular-ui.github.com/ui-router
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define("angular-ui-router",[],t):typeof exports=="object"?exports["angular-ui-router"]=t():n["angular-ui-router"]=t()})(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(1));r(i(53));r(i(54));r(i(56));i(57);i(58);i(59);i(60);Object.defineProperty(t,"__esModule",{value:!0});t.default="ui.router"},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(2));r(i(20));r(i(44));r(i(40));r(i(17));r(i(13));r(i(45));r(i(49));r(i(51));var u=i(52);t.UIRouter=u.UIRouter},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(3));r(i(6));r(i(7));r(i(5));r(i(4));r(i(8));r(i(9));r(i(12))},function(n,t,i){"use strict";function p(n,t,i,r){return r===void 0&&(r=Object.keys(n)),r.filter(function(t){return typeof n[t]=="function"}).forEach(function(r){return t[r]=n[r].bind(i)})}function w(n){var r,i,u;for(n===void 0&&(n={}),r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return u=c.apply(null,[{}].concat(r)),t.extend({},u,a(n||{},Object.keys(u)))}function c(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t.forEach(r,function(i){t.forEach(i,function(t,i){n.hasOwnProperty(i)||(n[i]=t)})}),n}function b(n,t){var r=[];for(var i in n.path){if(n.path[i]!==t.path[i])break;r.push(n.path[i])}return r}function k(n,t,i){var r,u;for(i===void 0&&(i=Object.keys(n)),r=0;r<i.length;r++)if(u=i[r],n[u]!=t[u])return!1;return!0}function l(n,t){var r={},u=e(arguments,2);for(var i in t)n(u,i)&&(r[i]=t[i]);return r}function a(){return l.apply(null,[o].concat(e(arguments)))}function d(){return l.apply(null,[u.not(o)].concat(e(arguments)))}function g(n,t){return s(n,u.prop(t))}function nt(n,i){var f=r.isArray(n),u=f?[]:{},e=f?function(n){return u.push(n)}:function(n,t){return u[t]=n};return t.forEach(n,function(n,t){i(n,t)&&e(n,t)}),u}function tt(n,i){var r;return t.forEach(n,function(n,t){r||i(n,t)&&(r=n)}),r}function s(n,i){var u=r.isArray(n)?[]:{};return t.forEach(n,function(n,t){return u[t]=i(n,t)}),u}function it(n,t){return n.push(t),n}function rt(n,t){return t===void 0&&(t="assert failure"),function(i){if(!n(i))throw new Error(r.isFunction(t)?t(i):t);return!0}}function v(){for(var i,n=[],t=0;t<arguments.length;t++)n[+t]=arguments[t];return n.length===0?[]:(i=n.reduce(function(n,t){return Math.min(t.length,n)},9007199254740991),Array.apply(null,Array(i)).map(function(t,i){return n.map(function(n){return n[i]})}))}function ut(n,t){var i,u;if(r.isArray(t)&&(i=t[0],u=t[1]),!r.isString(i))throw new Error("invalid parameters to applyPairs");return n[i]=u,n}function ft(n){return n.length&&n[n.length-1]||undefined}function et(n,i){return i&&Object.keys(i).forEach(function(n){return delete i[n]}),i||(i={}),t.extend(i,n)}function ot(n,t,i){if(r.isArray(n))return n.forEach(t,i);Object.keys(n).forEach(function(i){return t(n[i],i)})}function st(n,t){return Object.keys(t).forEach(function(i){return n[i]=t[i]}),n}function ht(n){return e(arguments,1).filter(t.identity).reduce(st,n)}function h(n,t){var e,s,i,c,f,o;if(n===t)return!0;if(n===null||t===null)return!1;if(n!==n&&t!==t)return!0;if(e=typeof n,s=typeof t,e!==s||e!=="object")return!1;if(i=[n,t],u.all(r.isArray)(i))return ct(n,t);if(u.all(r.isDate)(i))return n.getTime()===t.getTime();if(u.all(r.isRegExp)(i))return n.toString()===t.toString();if(u.all(r.isFunction)(i))return!0;if(c=[r.isFunction,r.isArray,r.isDate,r.isRegExp],c.map(u.any).reduce(function(n,t){return n||!!t(i)},!1))return!1;o={};for(f in n){if(!h(n[f],t[f]))return!1;o[f]=!0}for(f in t)if(!o[f])return!1;return!0}function ct(n,t){return n.length!==t.length?!1:v(n,t).reduce(function(n,t){return n&&h(t[0],t[1])},!0)}var r=i(4),u=i(5),y=typeof window=="undefined"?{}:window,f=y.angular||{},e,o;t.fromJson=f.fromJson||JSON.parse.bind(JSON);t.toJson=f.toJson||JSON.stringify.bind(JSON);t.copy=f.copy||et;t.forEach=f.forEach||ot;t.extend=f.extend||ht;t.equals=f.equals||h;t.identity=function(n){return n};t.noop=function(){return undefined};t.abstractKey="abstract";t.bindFunctions=p;t.inherit=function(n,i){return t.extend(new(t.extend(function(){},{prototype:n})),i)};e=function(n,t){return t===void 0&&(t=0),Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(n,t))};o=function(n,t){return n.indexOf(t)!==-1};t.removeFrom=u.curry(function(n,t){var i=n.indexOf(t);return i>=0&&n.splice(i,1),n});t.defaults=w;t.merge=c;t.mergeR=function(n,i){return t.extend(n,i)};t.ancestors=b;t.equalForKeys=k;t.pick=a;t.omit=d;t.pluck=g;t.filter=nt;t.find=tt;t.mapObj=s;t.map=s;t.values=function(n){return Object.keys(n).map(function(t){return n[t]})};t.allTrueR=function(n,t){return n&&t};t.anyTrueR=function(n,t){return n||t};t.unnestR=function(n,t){return n.concat(t)};t.flattenR=function(n,i){return r.isArray(i)?n.concat(i.reduce(t.flattenR,[])):it(n,i)};t.unnest=function(n){return n.reduce(t.unnestR,[])};t.flatten=function(n){return n.reduce(t.flattenR,[])};t.assertPredicate=rt;t.pairs=function(n){return Object.keys(n).map(function(t){return[t,n[t]]})};t.arrayTuples=v;t.applyPairs=ut;t.tail=ft},function(n,t,i){"use strict";function e(n){if(t.isArray(n)&&n.length){var i=n.slice(0,-1),u=n.slice(-1);return!(i.filter(r.not(t.isString)).length||u.filter(r.not(t.isFunction)).length)}return t.isFunction(n)}var r=i(5),f=Object.prototype.toString,u=function(n){return function(t){return typeof t===n}};t.isUndefined=u("undefined");t.isDefined=r.not(t.isUndefined);t.isNull=function(n){return n===null};t.isFunction=u("function");t.isNumber=u("number");t.isString=u("string");t.isObject=function(n){return n!==null&&typeof n=="object"};t.isArray=Array.isArray;t.isDate=function(n){return f.call(n)==="[object Date]"};t.isRegExp=function(n){return f.call(n)==="[object RegExp]"};t.isInjectable=e;t.isPromise=r.and(t.isObject,r.pipe(r.prop("then"),t.isFunction))},function(n,t){"use strict";function i(n){function t(i){return i.length>=r?n.apply(null,i):function(){return t(i.concat([].slice.apply(arguments)))}}var i=[].slice.apply(arguments,[1]),r=n.length;return t(i)}function r(){var n=arguments,t=n.length-1;return function(){for(var r=t,i=n[t].apply(this,arguments);r--;)i=n[r].call(this,i);return i}}function u(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];return r.apply(null,[].slice.call(arguments).reverse())}function f(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[+i]=arguments[i];return n.apply(null,r)&&t.apply(null,r)}}function e(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[+i]=arguments[i];return n.apply(null,r)||t.apply(null,r)}}function o(n,t){return function(i){return i[n].apply(i,t)}}function s(n){return function(t){for(var i=0;i<n.length;i++)if(n[i][0](t))return n[i][1](t)}}t.curry=i;t.compose=r;t.pipe=u;t.prop=function(n){return function(t){return t&&t[n]}};t.propEq=i(function(n,t,i){return i&&i[n]===t});t.parse=function(n){return u.apply(null,n.split(".").map(t.prop))};t.not=function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[+t]=arguments[t];return!n.apply(null,i)}};t.and=f;t.or=e;t.all=function(n){return function(t){return t.reduce(function(t,i){return t&&!!n(i)},!0)}};t.any=function(n){return function(t){return t.reduce(function(t,i){return t||!!n(i)},!1)}};t.none=t.not(t.any);t.is=function(n){return function(t){return t!=null&&t.constructor===n||t instanceof n}};t.eq=function(n){return function(t){return n===t}};t.val=function(n){return function(){return n}};t.invoke=o;t.pattern=s},function(n,t){"use strict";var r=function(n){return function(){throw new Error(n+"(): No coreservices implementation for UI-Router is loaded. You should include one of: ['angular1.js']");}},i={$q:undefined,$injector:undefined,location:{},locationConfig:{},template:{}};t.services=i;["replace","url","path","search","hash","onChange"].forEach(function(n){return i.location[n]=r(n)});["port","protocol","host","baseHref","html5Mode","hashPrefix"].forEach(function(n){return i.locationConfig[n]=r(n)})},function(n,t){"use strict";var i=function(){function n(n){this.text=n;this.glob=n.split(".")}return n.prototype.matches=function(n){for(var t=n.split("."),i=0,r=this.glob.length;i<r;i++)this.glob[i]==="*"&&(t[i]="*");return(this.glob[0]==="**"&&(t=t.slice(t.indexOf(this.glob[1])),t.unshift("**")),this.glob[this.glob.length-1]==="**"&&(t.splice(t.indexOf(this.glob[this.glob.length-2])+1,Number.MAX_VALUE),t.push("**")),this.glob.length!=t.length)?!1:t.join("")===this.glob.join("")},n.is=function(n){return n.indexOf("*")>-1},n.fromString=function(t){return this.is(t)?new n(t):null},n}();t.Glob=i},function(n,t){"use strict";var i=function(){function n(n,t){n===void 0&&(n=[]);t===void 0&&(t=null);this._items=n;this._limit=t}return n.prototype.enqueue=function(n){var t=this._items;return t.push(n),this._limit&&t.length>this._limit&&t.shift(),n},n.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},n.prototype.clear=function(){var n=this._items;return this._items=[],n},n.prototype.size=function(){return this._items.length},n.prototype.remove=function(n){var t=this._items.indexOf(n);return t>-1&&this._items.splice(t,1)[0]},n.prototype.peekTail=function(){return this._items[this._items.length-1]},n.prototype.peekHead=function(){if(this.size())return this._items[0]},n}();t.Queue=i},function(n,t,i){"use strict";function v(n,t){return t.length<=n?t:t.substr(0,n-3)+"..."}function y(n,t){while(t.length<n)t+=" ";return t}function p(n){return n.replace(/^([A-Z])/,function(n){return n.toLowerCase()}).replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}function w(n){return"Promise("+JSON.stringify(n)+")"}function e(n){var t=o(n),i=t.match(/^(function [^ ]+\([^)]*\))/);return i?i[1]:t}function o(n){var t=u.isArray(n)?n.slice(-1)[0]:n;return t&&t.toString()||"undefined"}function b(n){function i(n){if(u.isObject(n)){if(t.indexOf(n)!==-1)return"[circular ref]";t.push(n)}return h(n)}var t=[];return JSON.stringify(n,function(n,t){return i(t)}).replace(/\\"/g,'"')}var u=i(4),f=i(10),c=i(3),r=i(5),l=i(11),a=i(32),s,h;t.maxLength=v;t.padString=y;t.kebobString=p;t.functionToString=e;t.fnToString=o;s=f.Rejection.isTransitionRejectionPromise;h=r.pattern([[r.not(u.isDefined),r.val("undefined")],[u.isNull,r.val("null")],[u.isPromise,w],[s,function(n){return n._transitionRejection.toString()}],[r.is(f.Rejection),r.invoke("toString")],[r.is(l.Transition),r.invoke("toString")],[r.is(a.Resolvable),r.invoke("toString")],[u.isInjectable,e],[r.val(!0),c.identity]]);t.stringify=b;t.beforeAfterSubstr=function(n){return function(t){if(!t)return["",""];var i=t.indexOf(n);return i===-1?[t,""]:[t.substr(0,i),t.substr(i+1)]}}},function(n,t,i){"use strict";var f=i(3),e=i(6),o=i(9),r,u;(function(n){n[n.SUPERSEDED=2]="SUPERSEDED";n[n.ABORTED=3]="ABORTED";n[n.INVALID=4]="INVALID";n[n.IGNORED=5]="IGNORED"})(t.RejectType||(t.RejectType={}));r=t.RejectType;u=function(){function n(n,t,i){this.type=n;this.message=t;this.detail=i}return n.prototype.toString=function(){var n=function(n){return n&&n.toString!==Object.prototype.toString?n.toString():o.stringify(n)},t=this.type,i=this.message,r=n(this.detail);return"TransitionRejection(type: "+t+", message: "+i+", detail: "+r+")"},n.prototype.toPromise=function(){return f.extend(e.services.$q.reject(this),{_transitionRejection:this})},n.isTransitionRejectionPromise=function(t){return t&&typeof t.then=="function"&&t._transitionRejection instanceof n},n.superseded=function(t,i){var u=new n(r.SUPERSEDED,"The transition has been superseded by a different transition (see detail).",t);return i&&i.redirected&&(u.redirected=!0),u},n.redirected=function(t){return n.superseded(t,{redirected:!0})},n.invalid=function(t){return new n(r.INVALID,"This transition is invalid (see detail)",t)},n.ignored=function(t){return new n(r.IGNORED,"The transition was ignored.",t)},n.aborted=function(t){return new n(r.ABORTED,"The transition has been aborted.",t)},n}();t.Rejection=u},function(n,t,i){"use strict";var e=i(12),h=i(6),r=i(3),c=i(4),u=i(5),f=i(13),v=i(39),o=i(38),y=i(17),l=i(20),p=i(40),a=i(10),w=0,s=u.prop("self"),b=function(){function n(n,t,i){var s=this,e;if(this._transitionService=i,this._deferred=h.services.$q.defer(),this.promise=this._deferred.promise,this.treeChanges=function(){return s._treeChanges},this.isActive=function(){return s===s._options.current()},!t.valid())throw new Error(t.error());f.HookRegistry.mixin(new f.HookRegistry,this);this._options=r.extend({current:u.val(this)},t.options());this.$id=w++;e=o.PathFactory.buildToPath(n,t);e=o.PathFactory.applyViewConfigs(i.$view,e);this._treeChanges=o.PathFactory.treeChanges(n,e,this._options.reloadState);o.PathFactory.bindTransitionResolve(this._treeChanges,this)}return n.prototype.$from=function(){return r.tail(this._treeChanges.from).state},n.prototype.$to=function(){return r.tail(this._treeChanges.to).state},n.prototype.from=function(){return this.$from().self},n.prototype.to=function(){return this.$to().self},n.prototype.is=function(t){return t instanceof n?this.is({to:t.$to().name,from:t.$from().name}):!(t.to&&!f.matchState(this.$to(),t.to)||t.from&&!f.matchState(this.$from(),t.from))},n.prototype.params=function(n){return n===void 0&&(n="to"),this._treeChanges[n].map(u.prop("paramValues")).reduce(r.mergeR,{})},n.prototype.resolves=function(){return r.map(r.tail(this._treeChanges.to).resolveContext.getResolvables(),function(n){return n.data})},n.prototype.addResolves=function(n,t){t===void 0&&(t="");var u=typeof t=="string"?t:t.name,i=this._treeChanges.to,f=r.find(i,function(n){return n.state.name===u});r.tail(i).resolveContext.addResolvables(p.Resolvable.makeResolvables(n),f.state)},n.prototype.previous=function(){return this._options.previous||null},n.prototype.options=function(){return this._options},n.prototype.entering=function(){return r.map(this._treeChanges.entering,u.prop("state")).map(s)},n.prototype.exiting=function(){return r.map(this._treeChanges.exiting,u.prop("state")).map(s).reverse()},n.prototype.retained=function(){return r.map(this._treeChanges.retained,u.prop("state")).map(s)},n.prototype.views=function(n,t){n===void 0&&(n="entering");var i=this._treeChanges[n];return i=t?i.filter(u.propEq("state",t)):i,i.map(u.prop("views")).filter(r.identity).reduce(r.unnestR,[])},n.prototype.redirect=function(t){var e=r.extend({},this.options(),t.options(),{previous:this});t=new y.TargetState(t.identifier(),t.$state(),t.params(),e);var i=new n(this._treeChanges.from,t,this._transitionService),u=t.options().reloadState,f=this.treeChanges().to,o=v.Node.matching(i.treeChanges().to,f).filter(function(n){return!u||!u.includes[n.state.name]}),s=function(n,t){return["$stateParams","$transition$"].indexOf(t)===-1};return o.forEach(function(n,t){return r.extend(n.resolves,r.filter(f[t].resolves,s))}),i},n.prototype._changedParams=function(){var t=this._treeChanges,n=t.to,i=t.from;if(this._options.reload||r.tail(n).state!==r.tail(i).state)return undefined;var f=n.map(function(n){return n.paramSchema}),u=[n,i].map(function(n){return n.map(function(n){return n.paramValues})}),e=u[0],o=u[1],s=r.arrayTuples(f,e,o);return s.map(function(n){var t=n[0],i=n[1],r=n[2];return l.Param.changed(t,i,r)}).reduce(r.unnestR,[])},n.prototype.dynamic=function(){var n=this._changedParams();return n?n.map(function(n){return n.dynamic}).reduce(r.anyTrueR,!1):!1},n.prototype.ignored=function(){var n=this._changedParams();return n?n.length===0:!1},n.prototype.hookBuilder=function(){return new f.HookBuilder(this._transitionService,this,{transition:this,current:this._options.current})},n.prototype.run=function(){var n=this,i=this.hookBuilder(),r=f.TransitionHook.runSynchronousHooks,v=function(){return r(i.getOnSuccessHooks(),{},!0)},y=function(n){return r(i.getOnErrorHooks(),{$error$:n},!0)},t,u,o,s,c,l;return(this.promise.then(v,y),t=r(i.getOnBeforeHooks()),a.Rejection.isTransitionRejectionPromise(t))?(t.catch(function(){return 0}),u=t._transitionRejection,this._deferred.reject(u),this.promise):this.valid()?this.ignored()?(e.trace.traceTransitionIgnored(this),this._deferred.reject(a.Rejection.ignored()),this.promise):(s=function(){n.success=!0;n._deferred.resolve(n);e.trace.traceSuccess(n.$to(),n)},c=function(t){return n.success=!1,n._deferred.reject(t),e.trace.traceError(t,n),h.services.$q.reject(t)},e.trace.traceTransitionStart(this),l=i.asyncHooks().reduce(function(n,t){return n.then(t.invokeHook.bind(t))},t),l.then(s,c),this.promise):(o=new Error(this.error()),this._deferred.reject(o),this.promise)},n.prototype.valid=function(){return!this.error()},n.prototype.error=function(){var n=this.$to();return n.self[r.abstractKey]?"Cannot transition to abstract state '"+n.name+"'":l.Param.validates(n.parameters(),this.params())?void 0:"Param values not valid for state '"+n.name+"'"},n.prototype.toString=function(){var n=this.from(),t=this.to(),i=function(n){return n["#"]!==null&&n["#"]!==undefined?n:r.omit(n,"#")},f=this.$id,e=c.isObject(n)?n.name:n,o=r.toJson(i(this._treeChanges.from.map(u.prop("paramValues")).reduce(r.mergeR,{}))),s=this.valid()?"":"(X) ",h=c.isObject(t)?t.name:t,l=r.toJson(i(this.params()));return"Transition#"+f+"( '"+e+"'"+o+" -> "+s+"'"+h+"'"+l+" )"},n}();t.Transition=b},function(n,t,i){"use strict";function o(n){return n?"[ui-view#"+n.id+" tag in template from '"+(n.creationContext.name||"(root)")+"' state]: fqn: '"+n.fqn+"', name: '"+n.name+"@"+n.creationContext+"')":"ui-view (defunct)"}function s(n){return c.isNumber(n)?r[n]:r[r[n]]}var f=i(5),c=i(4),u=i(9),l=function(n){return"[ViewConfig from '"+(n.viewDecl.$context.name||"(root)")+"' state]: target ui-view: '"+n.viewDecl.$uiViewName+"@"+n.viewDecl.$uiViewContextAnchor+"'"},r,e,h;(function(n){n[n.RESOLVE=0]="RESOLVE";n[n.TRANSITION=1]="TRANSITION";n[n.HOOK=2]="HOOK";n[n.INVOKE=3]="INVOKE";n[n.UIVIEW=4]="UIVIEW";n[n.VIEWCONFIG=5]="VIEWCONFIG"})(t.Category||(t.Category={}));r=t.Category;e=function(){function n(){this._enabled={};this.approximateDigests=0}return n.prototype._set=function(n,t){var i=this;t.length||(t=Object.keys(r).filter(function(n){return isNaN(parseInt(n,10))}).map(function(n){return r[n]}));t.map(s).forEach(function(t){return i._enabled[t]=n})},n.prototype.enable=function(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];this._set(!0,t)},n.prototype.disable=function(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];this._set(!1,t)},n.prototype.enabled=function(n){return!!this._enabled[s(n)]},n.prototype.traceTransitionStart=function(n){if(this.enabled(r.TRANSITION)){var t=n.$id,i=this.approximateDigests,f=u.stringify(n);console.log("Transition #"+t+" Digest #"+i+": Started  -> "+f)}},n.prototype.traceTransitionIgnored=function(n){if(this.enabled(r.TRANSITION)){var t=n.$id,i=this.approximateDigests,f=u.stringify(n);console.log("Transition #"+t+" Digest #"+i+": Ignored  <> "+f)}},n.prototype.traceHookInvocation=function(n,t){if(this.enabled(r.HOOK)){var i=f.parse("transition.$id")(t),e=this.approximateDigests,o=f.parse("traceData.hookType")(t)||"internal",s=f.parse("traceData.context.state.name")(t)||f.parse("traceData.context")(t)||"unknown",h=u.functionToString(n.fn);console.log("Transition #"+i+" Digest #"+e+":   Hook -> "+o+" context: "+s+", "+u.maxLength(200,h))}},n.prototype.traceHookResult=function(n,t,i){if(this.enabled(r.HOOK)){var e=f.parse("transition.$id")(i),o=this.approximateDigests,s=u.stringify(n),h=u.stringify(t);console.log("Transition #"+e+" Digest #"+o+":   <- Hook returned: "+u.maxLength(200,s)+", transition result: "+u.maxLength(200,h))}},n.prototype.traceResolvePath=function(n,t){if(this.enabled(r.RESOLVE)){var i=f.parse("transition.$id")(t),u=this.approximateDigests,e=n&&n.toString(),o=t&&t.resolvePolicy;console.log("Transition #"+i+" Digest #"+u+":         Resolving "+e+" ("+o+")")}},n.prototype.traceResolvePathElement=function(n,t,i){if(this.enabled(r.RESOLVE)&&t.length){var u=f.parse("transition.$id")(i),e=this.approximateDigests,o=Object.keys(t).join(", "),s=n&&n.toString(),h=i&&i.resolvePolicy;console.log("Transition #"+u+" Digest #"+e+":         Resolve "+s+" resolvables: ["+o+"] ("+h+")")}},n.prototype.traceResolveResolvable=function(n,t){if(this.enabled(r.RESOLVE)){var i=f.parse("transition.$id")(t),u=this.approximateDigests,e=n&&n.toString();console.log("Transition #"+i+" Digest #"+u+":               Resolving -> "+e)}},n.prototype.traceResolvableResolved=function(n,t){if(this.enabled(r.RESOLVE)){var i=f.parse("transition.$id")(t),e=this.approximateDigests,o=n&&n.toString(),s=u.stringify(n.data);console.log("Transition #"+i+" Digest #"+e+":               <- Resolved  "+o+" to: "+u.maxLength(200,s))}},n.prototype.tracePathElementInvoke=function(n,t,i,e){if(this.enabled(r.INVOKE)){var o=f.parse("transition.$id")(e),s=this.approximateDigests,h=n&&n.state&&n.state.toString(),c=u.functionToString(t);console.log("Transition #"+o+" Digest #"+s+":         Invoke "+e.when+": context: "+h+" "+u.maxLength(200,c))}},n.prototype.traceError=function(n,t){if(this.enabled(r.TRANSITION)){var i=t.$id,f=this.approximateDigests,e=u.stringify(t);console.log("Transition #"+i+" Digest #"+f+": <- Rejected "+e+", reason: "+n)}},n.prototype.traceSuccess=function(n,t){if(this.enabled(r.TRANSITION)){var i=t.$id,f=this.approximateDigests,e=n.name,o=u.stringify(t);console.log("Transition #"+i+" Digest #"+f+": <- Success  "+o+", final state: "+e)}},n.prototype.traceUiViewEvent=function(n,t,i){(i===void 0&&(i=""),this.enabled(r.UIVIEW))&&console.log("ui-view: "+u.padString(30,n)+" "+o(t)+i)},n.prototype.traceUiViewConfigUpdated=function(n,t){this.enabled(r.UIVIEW)&&this.traceUiViewEvent("Updating",n," with ViewConfig from context='"+t+"'")},n.prototype.traceUiViewScopeCreated=function(n,t){this.enabled(r.UIVIEW)&&this.traceUiViewEvent("Created scope for",n,", scope #"+t.$id)},n.prototype.traceUiViewFill=function(n,t){this.enabled(r.UIVIEW)&&this.traceUiViewEvent("Fill",n," with: "+u.maxLength(200,t))},n.prototype.traceViewServiceEvent=function(n,t){this.enabled(r.VIEWCONFIG)&&console.log("VIEWCONFIG: "+n+" "+l(t))},n.prototype.traceViewServiceUiViewEvent=function(n,t){this.enabled(r.VIEWCONFIG)&&console.log("VIEWCONFIG: "+n+" "+o(t))},n}();t.Trace=e;h=new e;t.trace=h},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(14));r(i(15));r(i(10));r(i(11));r(i(16));r(i(43))},function(n,t,i){"use strict";function u(n){return n===void 0&&(n=!1),function(t,i){var u=n?-1:1,r=(t.node.state.path.length-i.node.state.path.length)*u;return r!==0?r:i.hook.priority-t.hook.priority}}var r=i(3),f=i(4),e=i(13),o=function(){function n(n,t,i){var f=this;this.$transitions=n;this.transition=t;this.baseHookOptions=i;this.getOnBeforeHooks=function(){return f._buildNodeHooks("onBefore","to",u(),undefined,{async:!1})};this.getOnStartHooks=function(){return f._buildNodeHooks("onStart","to",u())};this.getOnExitHooks=function(){return f._buildNodeHooks("onExit","exiting",u(!0),function(n){return{$state$:n.state}})};this.getOnRetainHooks=function(){return f._buildNodeHooks("onRetain","retained",u(),function(n){return{$state$:n.state}})};this.getOnEnterHooks=function(){return f._buildNodeHooks("onEnter","entering",u(),function(n){return{$state$:n.state}})};this.getOnFinishHooks=function(){return f._buildNodeHooks("onFinish","to",u(),function(){return{$treeChanges$:f.treeChanges}})};this.getOnSuccessHooks=function(){return f._buildNodeHooks("onSuccess","to",u(),undefined,{async:!1,rejectIfSuperseded:!1})};this.getOnErrorHooks=function(){return f._buildNodeHooks("onError","to",u(),undefined,{async:!1,rejectIfSuperseded:!1})};this.treeChanges=t.treeChanges();this.toState=r.tail(this.treeChanges.to).state;this.fromState=r.tail(this.treeChanges.from).state;this.transitionOptions=t.options()}return n.prototype.asyncHooks=function(){var n=this.getOnStartHooks(),t=this.getOnExitHooks(),i=this.getOnRetainHooks(),u=this.getOnEnterHooks(),f=this.getOnFinishHooks(),e=[n,t,i,u,f];return e.reduce(r.unnestR,[]).filter(r.identity)},n.prototype._buildNodeHooks=function(n,t,i,u,f){var s=this,o,h;return(u===void 0&&(u=function(){return{}}),o=this._matchingHooks(n,this.treeChanges),!o)?[]:(h=function(i){var o=i.matches(s.treeChanges),h=o[t];return h.map(function(t){var o=r.extend({bind:i.bind,traceData:{hookType:n,context:t}},s.baseHookOptions,f),h=new e.TransitionHook(i.callback,u(t),t.resolveContext,o);return{hook:i,node:t,transitionHook:h}})},o.map(h).reduce(r.unnestR,[]).sort(i).map(function(n){return n.transitionHook}))},n.prototype._matchingHooks=function(n,t){return[this.transition,this.$transitions].map(function(t){return t.getHooks(n)}).filter(r.assertPredicate(f.isArray,"broken event named: "+n)).reduce(r.unnestR,[]).filter(function(n){return n.matches(t)})},n}();t.HookBuilder=o},function(n,t,i){"use strict";function o(n,t){function r(n){for(var r,u=i,t=0;t<u.length;t++)if(r=h.Glob.fromString(u[t]),r&&r.matches(n.name)||!r&&u[t]===n.name)return!0;return!1}var i=e.isString(t)?[t]:t,u=e.isFunction(i)?i:r;return!!u(n)}function r(n,t){return function(i,r,e){e===void 0&&(e={});var o=new f(i,r,e);return n[t].push(o),function(){u.removeFrom(n[t])(o)}}}var u=i(3),e=i(4),h=i(7),f,s;t.matchState=o;f=function(){function n(n,t,i){i===void 0&&(i={});this.callback=t;this.matchCriteria=u.extend({to:!0,from:!0,exiting:!0,retained:!0,entering:!0},n);this.priority=i.priority||0;this.bind=i.bind||null}return n._matchingNodes=function(n,t){if(t===!0)return n;var i=n.filter(function(n){return o(n.state,t)});return i.length?i:null},n.prototype.matches=function(t){var i=this.matchCriteria,r=n._matchingNodes,f={to:r([u.tail(t.to)],i.to),from:r([u.tail(t.from)],i.from),exiting:r(t.exiting,i.exiting),retained:r(t.retained,i.retained),entering:r(t.entering,i.entering)},e=["to","from","exiting","retained","entering"].map(function(n){return f[n]}).reduce(u.allTrueR,!0);return e?f:null},n}();t.EventHook=f;s=function(){function n(){var n=this;this._transitionEvents={onBefore:[],onStart:[],onEnter:[],onRetain:[],onExit:[],onFinish:[],onSuccess:[],onError:[]};this.getHooks=function(t){return n._transitionEvents[t]};this.onBefore=r(this._transitionEvents,"onBefore");this.onStart=r(this._transitionEvents,"onStart");this.onEnter=r(this._transitionEvents,"onEnter");this.onRetain=r(this._transitionEvents,"onRetain");this.onExit=r(this._transitionEvents,"onExit");this.onFinish=r(this._transitionEvents,"onFinish");this.onSuccess=r(this._transitionEvents,"onSuccess");this.onError=r(this._transitionEvents,"onError")}return n.mixin=function(n,t){Object.keys(n._transitionEvents).concat(["getHooks"]).forEach(function(i){return t[i]=n[i]})},n}();t.HookRegistry=s},function(n,t,i){"use strict";var f=i(3),o=i(9),e=i(4),r=i(5),s=i(12),h=i(6),u=i(10),c=i(17),l={async:!0,rejectIfSuperseded:!0,current:f.noop,transition:null,traceData:{},bind:null},a=function(){function n(n,t,i,r){var u=this;this.fn=n;this.locals=t;this.resolveContext=i;this.options=r;this.isSuperseded=function(){return u.options.current()!==u.options.transition};this.options=f.defaults(r,l)}return n.prototype.invokeHook=function(n){var c=this,i=this,t=i.options,r=i.fn,e=i.resolveContext,o=f.extend({},this.locals,n),h;return(s.trace.traceHookInvocation(this,t),t.rejectIfSuperseded&&this.isSuperseded())?u.Rejection.superseded(t.current()).toPromise():t.async?e.invokeLater(r,o,t).then(function(n){return c.handleHookResult(n)}):(h=e.invokeNow(r,o,t),this.handleHookResult(h))},n.prototype.handleHookResult=function(n){var i=this,f,t;return e.isDefined(n)?(f=r.pattern([[this.isSuperseded,function(){return u.Rejection.superseded(i.options.current()).toPromise()}],[r.eq(!1),function(){return u.Rejection.aborted("Hook aborted transition").toPromise()}],[r.is(c.TargetState),function(n){return u.Rejection.redirected(n).toPromise()}],[e.isPromise,function(n){return n.then(i.handleHookResult.bind(i))}]]),t=f(n),t&&s.trace.traceHookResult(n,t,this.options),t):undefined},n.prototype.toString=function(){var t=this,n=t.options,i=t.fn,u=r.parse("traceData.hookType")(n)||"internal",f=r.parse("traceData.context.state.name")(n)||r.parse("traceData.context")(n)||"unknown",e=o.fnToString(i);return u+" context: "+f+", "+o.maxLength(200,e)},n.runSynchronousHooks=function(n,t,i){var f,o,s;for(t===void 0&&(t={}),i===void 0&&(i=!1),f=[],o=0;o<n.length;o++)try{f.push(n[o].invokeHook(t))}catch(c){if(!i)return u.Rejection.aborted(c).toPromise();console.error("Swallowed exception during synchronous hook handler: "+c)}return(s=f.filter(u.Rejection.isTransitionRejectionPromise),s.length)?s[0]:f.filter(e.isPromise).reduce(function(n,t){return n.then(r.val(t))},h.services.$q.when())},n}();t.TransitionHook=a},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(18));r(i(19));r(i(26));r(i(33));r(i(34));r(i(35));r(i(36));r(i(37));r(i(27))},function(n,t,i){"use strict";var r=i(4),u=i(3),f=function(){function n(t){this.stateRegistry=t;this.invalidCallbacks=[];u.bindFunctions(n.prototype,this,this)}return n.prototype.decorator=function(n,t){return this.stateRegistry.decorator(n,t)||this},n.prototype.state=function(n,t){return r.isObject(n)?t=n:t.name=n,this.stateRegistry.register(t),this},n.prototype.onInvalid=function(n){this.invalidCallbacks.push(n)},n}();t.StateProvider=f},function(n,t,i){"use strict";var r=i(3),u=i(4),f=i(5),e=i(20),o=function(n){if(!u.isString(n))return!1;var t=n.charAt(0)==="^";return{val:t?n.substring(1):n,root:t}},s=function(){function n(n,t){this.matcher=n;var s=this,i=function(n){return n.name===""},u=function(){return n.find("")};this.builders={self:[function(n){return n.self.$$state=function(){return n},n.self}],parent:[function(t){return i(t)?null:n.find(s.parentName(t))||u()}],data:[function(n){return n.parent&&n.parent.data&&(n.data=n.self.data=r.inherit(n.parent.data,n.data)),n.data}],url:[function(n){var e=n,f=o(e.url),s=n.parent,i=f?t.compile(f.val,{params:n.params||{},paramMap:function(n,t){return e.reloadOnSearch===!1&&t&&(n=r.extend(n||{},{dynamic:!0})),n}}):e.url;if(!i)return null;if(!t.isMatcher(i))throw new Error("Invalid url '"+i+"' in state '"+n+"'");return f&&f.root?i:(s&&s.navigable||u()).url.append(i)}],navigable:[function(n){return!i(n)&&n.url?n:n.parent?n.parent.navigable:null}],params:[function(n){var i=function(n,t){return e.Param.fromConfig(t,null,n)},t=n.url&&n.url.parameters({inherit:!1})||[],u=r.values(r.map(r.omit(n.params||{},t.map(f.prop("id"))),i));return t.concat(u).map(function(n){return[n.id,n]}).reduce(r.applyPairs,{})}],views:[],path:[function(n){return n.parent?n.parent.path.concat(n):[n]}],includes:[function(n){var t=n.parent?r.extend({},n.parent.includes):{};return t[n.name]=!0,t}]}}return n.prototype.builder=function(n,t){var i=this.builders,r=i[n]||[];return u.isString(n)&&!u.isDefined(t)?r.length>1?r:r[0]:!u.isString(n)||!u.isFunction(t)?void 0:(i[n]=r,i[n].push(t),function(){return i[n].splice(i[n].indexOf(t,1))&&null})},n.prototype.build=function(n){var u=this,o=u.matcher,i=u.builders,f=this.parentName(n),t,e;if(f&&!o.find(f))return null;for(t in i)i.hasOwnProperty(t)&&(e=i[t].reduce(function(n,t){return function(i){return t(i,n)}},r.noop),n[t]=e(n));return n},n.prototype.parentName=function(n){var t=n.name||"";return t.indexOf(".")!==-1?t.substring(0,t.lastIndexOf(".")):n.parent?u.isString(n.parent)?n.parent:n.parent.name:""},n.prototype.name=function(n){var t=n.name,i;return t.indexOf(".")!==-1||!n.parent?t:(i=u.isString(n.parent)?n.parent:n.parent.name,i?i+"."+t:t)},n}();t.StateBuilder=s},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(21));r(i(24));r(i(25));r(i(23))},function(n,t,i){"use strict";function y(n){return n=v(n)&&{value:n}||n,r.extend(n,{$$fn:u.isInjectable(n.value)?n.value:function(){return n.value}})}function p(n,t,i,r){if(n.type&&t&&t.name!=="string")throw new Error("Param '"+r+"' has two type configurations.");return n.type&&t&&t.name==="string"&&e.paramTypes.type(n.type)?e.paramTypes.type(n.type):t?t:n.type?n.type instanceof l.Type?n.type:e.paramTypes.type(n.type):i===f.CONFIG?e.paramTypes.type("any"):e.paramTypes.type("string")}function w(n,t){var i=n.squash;if(!t||i===!1)return!1;if(!u.isDefined(i)||i==null)return c.matcherConfig.defaultSquashPolicy();if(i===!0||u.isString(i))return i;throw new Error("Invalid squash policy: '"+i+"'. Valid policies: false, true, or arbitrary string");}function b(n,t,i,f){var e,s,h=[{from:"",to:i||t?undefined:""},{from:null,to:i||t?undefined:""}];return e=u.isArray(n.replace)?n.replace:[],u.isString(f)&&e.push({from:f,to:undefined}),s=r.map(e,o.prop("from")),r.filter(h,function(n){return s.indexOf(n.from)===-1}).concat(e)}var r=i(3),o=i(5),u=i(4),s=i(6),c=i(22),l=i(23),e=i(24),a=Object.prototype.hasOwnProperty,v=function(n){return["value","type","squash","array","dynamic"].filter(a.bind(n||{})).length===0},f,h;(function(n){n[n.PATH=0]="PATH";n[n.SEARCH=1]="SEARCH";n[n.CONFIG=2]="CONFIG"})(t.DefType||(t.DefType={}));f=t.DefType;h=function(){function n(n,t,i,u){function l(){var t={array:u===f.SEARCH?"auto":!1},e=n.match(/\[\]$/)?{array:!0}:{};return r.extend(t,e,i).array}var e;i=y(i);t=p(i,t,u,n);e=l();t=e?t.$asArray(e,u===f.SEARCH):t;var o=i.value!==undefined,h=i.dynamic===!0,s=w(i,o),c=b(i,e,o,s);r.extend(this,{id:n,type:t,location:u,squash:s,replace:c,isOptional:o,dynamic:h,config:i,array:e})}return n.prototype.isDefaultValue=function(n){return this.isOptional&&this.type.equals(this.value(),n)},n.prototype.value=function(n){var t=this,i=function(){if(!s.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var n=s.services.$injector.invoke(t.config.$$fn);if(n!==null&&n!==undefined&&!t.type.is(n))throw new Error("Default value ("+n+") for parameter '"+t.id+"' is not an instance of Type ("+t.type.name+")");return n},f=function(n){var i=r.map(r.filter(t.replace,o.propEq("from",n)),o.prop("to"));return i.length?i[0]:n};return n=f(n),u.isDefined(n)?this.type.$normalize(n):i()},n.prototype.isSearch=function(){return this.location===f.SEARCH},n.prototype.validates=function(n){var t,i;return(!u.isDefined(n)||n===null)&&this.isOptional?!0:(t=this.type.$normalize(n),!this.type.is(t))?!1:(i=this.type.encode(t),!(u.isString(i)&&!this.type.pattern.exec(i)))},n.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},n.fromConfig=function(t,i,r){return new n(t,i,r,f.CONFIG)},n.fromPath=function(t,i,r){return new n(t,i,r,f.PATH)},n.fromSearch=function(t,i,r){return new n(t,i,r,f.SEARCH)},n.values=function(n,t){return t===void 0&&(t={}),n.map(function(n){return[n.id,n.value(t[n.id])]}).reduce(r.applyPairs,{})},n.changed=function(n,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),n.filter(function(n){return!n.type.equals(t[n.id],i[n.id])})},n.equals=function(t,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),n.changed(t,i,r).length===0},n.validates=function(n,t){return t===void 0&&(t={}),n.map(function(n){return n.validates(t[n.id])}).reduce(r.allTrueR,!0)},n}();t.Param=h},function(n,t,i){"use strict";var r=i(4),u=function(){function n(){this._isCaseInsensitive=!1;this._isStrictMode=!0;this._defaultSquashPolicy=!1}return n.prototype.caseInsensitive=function(n){return this._isCaseInsensitive=r.isDefined(n)?n:this._isCaseInsensitive},n.prototype.strictMode=function(n){return this._isStrictMode=r.isDefined(n)?n:this._isStrictMode},n.prototype.defaultSquashPolicy=function(n){if(r.isDefined(n)&&n!==!0&&n!==!1&&!r.isString(n))throw new Error("Invalid squash policy: "+n+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=r.isDefined(n)?n:this._defaultSquashPolicy},n}();t.MatcherConfig=u;t.matcherConfig=new u},function(n,t,i){"use strict";function f(n,t){function i(n){return u.isArray(n)?n:u.isDefined(n)?[n]:[]}function o(n){switch(n.length){case 0:return undefined;case 1:return t==="auto"?n[0]:n;default:return n}}function f(n,t){return function(f){if(u.isArray(f)&&f.length===0)return f;var s=i(f),e=r.map(s,n);return t===!0?r.filter(e,function(n){return!n}).length===0:o(e)}}function s(n){return function(t,r){var f=i(t),e=i(r),u;if(f.length!==e.length)return!1;for(u=0;u<f.length;u++)if(!n(f[u],e[u]))return!1;return!0}}var e=this;["encode","decode","equals","$normalize"].map(function(t){e[t]=(t==="equals"?s:f)(n[t].bind(n))});r.extend(this,{name:n.name,pattern:n.pattern,is:f(n.is.bind(n),!0),$arrayMode:t})}var r=i(3),u=i(4),e=function(){function n(n){this.pattern=/.*/;r.extend(this,n)}return n.prototype.is=function(){return!0},n.prototype.encode=function(n){return n},n.prototype.decode=function(n){return n},n.prototype.equals=function(n,t){return n==t},n.prototype.$subPattern=function(){var n=this.pattern.toString();return n.substr(1,n.length-2)},n.prototype.toString=function(){return"{Type:"+this.name+"}"},n.prototype.$normalize=function(n){return this.is(n)?n:this.decode(n)},n.prototype.$asArray=function(n,t){if(!n)return this;if(n==="auto"&&!t)throw new Error("'auto' array mode is for query parameters only");return new f(this,n)},n}();t.Type=e},function(n,t,i){"use strict";function f(n){return n!=null?n.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):n}function s(n){return n!=null?n.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):n}var r=i(3),e=i(4),u=i(5),c=i(6),o=i(23),h=function(){function n(){this.enqueue=!0;this.typeQueue=[];this.defaultTypes={hash:{encode:f,decode:s,is:u.is(String),pattern:/.*/,equals:function(n,t){return n==t}},string:{encode:f,decode:s,is:u.is(String),pattern:/[^/]*/},int:{encode:f,decode:function(n){return parseInt(n,10)},is:function(n){return e.isDefined(n)&&this.decode(n.toString())===n},pattern:/-?\d+/},bool:{encode:function(n){return n&&1||0},decode:function(n){return parseInt(n,10)!==0},is:u.is(Boolean),pattern:/0|1/},date:{encode:function(n){return this.is(n)?[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("-"):undefined},decode:function(n){if(this.is(n))return n;var t=this.capture.exec(n);return t?new Date(t[1],t[2]-1,t[3]):undefined},is:function(n){return n instanceof Date&&!isNaN(n.valueOf())},equals:function(n,t){return["getFullYear","getMonth","getDate"].reduce(function(i,r){return i&&n[r]()===t[r]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:r.toJson,decode:r.fromJson,is:u.is(Object),equals:r.equals,pattern:/[^/]*/},any:{encode:r.identity,decode:r.identity,equals:r.equals,pattern:/.*/}};var n=function(n,t){return new o.Type(r.extend({name:t},n))};this.types=r.inherit(r.map(this.defaultTypes,n),{})}return n.prototype.type=function(n,t,i){if(!e.isDefined(t))return this.types[n];if(this.types.hasOwnProperty(n))throw new Error("A type named '"+n+"' has already been defined.");return this.types[n]=new o.Type(r.extend({name:n},t)),i&&(this.typeQueue.push({name:n,def:i}),this.enqueue||this._flushTypeQueue()),this},n.prototype._flushTypeQueue=function(){while(this.typeQueue.length){var n=this.typeQueue.shift();if(n.pattern)throw new Error("You cannot override a type's .pattern at runtime.");r.extend(this.types[n.name],c.services.$injector.invoke(n.def))}},n}();t.ParamTypes=h;t.paramTypes=new h},function(n,t,i){"use strict";var r=i(3),u=function(){function n(n){n===void 0&&(n={});r.extend(this,n)}return n.prototype.$inherit=function(n,t,i){var e=r.ancestors(t,i),u,s={},h=[],o,f;for(o in e)if(e[o]&&e[o].params&&(u=Object.keys(e[o].params),u.length))for(f in u)h.indexOf(u[f])>=0||(h.push(u[f]),s[u[f]]=this[u[f]]);return r.extend({},s,n)},n}();t.StateParams=u},function(n,t,i){"use strict";var r=i(10),u=i(27),f=i(28),e=i(29),o=i(30),s=i(6),h=function(){function n(n,t,i,r,u,h){this.transition=n;this.$transitions=t;this.$urlRouter=i;this.$view=r;this.$state=u;this.globals=h;this.$q=s.services.$q;this.viewHooks=new f.ViewHooks(n,r);this.enterExitHooks=new e.EnterExitHooks(n);this.resolveHooks=new o.ResolveHooks(n);this.treeChanges=n.treeChanges();this.registerUpdateGlobalState();this.viewHooks.registerHooks();this.enterExitHooks.registerHooks();this.resolveHooks.registerHooks()}return n.prototype.runTransition=function(){var n=this;return this.globals.transitionHistory.enqueue(this.transition),this.transition.run().then(function(n){return n.to()}).catch(function(t){return n.transRejected(t)})},n.prototype.registerUpdateGlobalState=function(){this.transition.onSuccess({},this.updateUrl.bind(this),{priority:9999})},n.prototype.transRejected=function(n){var t=this,i=t.transition,f=t.$state,e=t.$q;if(n instanceof r.Rejection){if(n.type===r.RejectType.IGNORED)return this.$urlRouter.update(),f.current;if(n.type===r.RejectType.SUPERSEDED&&n.redirected&&n.detail instanceof u.TargetState)return this._redirectMgr(i.redirect(n.detail)).runTransition();n.type===r.RejectType.ABORTED&&this.$urlRouter.update()}return this.$transitions.defaultErrorHandler()(n),e.reject(n)},n.prototype.updateUrl=function(){var u=this.transition,t=this,i=t.$urlRouter,n=t.$state,r=u.options();r.location&&n.$current.navigable&&i.push(n.$current.navigable.url,n.params,{replace:r.location==="replace"});i.update(!0)},n.prototype._redirectMgr=function(t){var i=this,r=i.$transitions,u=i.$urlRouter,f=i.$view,e=i.$state,o=i.globals;return new n(t,r,u,f,e,o)},n}();t.TransitionManager=h},function(n,t){"use strict";var i=function(){function n(n,t,i,r){i===void 0&&(i={});r===void 0&&(r={});this._identifier=n;this._definition=t;this._options=r;this._params=i||{}}return n.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},n.prototype.identifier=function(){return this._identifier},n.prototype.params=function(){return this._params},n.prototype.$state=function(){return this._definition},n.prototype.state=function(){return this._definition&&this._definition.self},n.prototype.options=function(){return this._options},n.prototype.exists=function(){return!!(this._definition&&this._definition.self)},n.prototype.valid=function(){return!this.error()},n.prototype.error=function(){var n=this.options().relative,t;return!this._definition&&!!n?(t=n.name?n.name:n,"Could not resolve '"+this.name()+"' from state '"+t+"'"):this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},n}();t.TargetState=i},function(n,t,i){"use strict";var r=i(3),u=i(6),f=function(){function n(n,t){this.transition=n;this.$view=t;this.treeChanges=n.treeChanges();this.enteringViews=n.views("entering");this.exitingViews=n.views("exiting")}return n.prototype.loadAllEnteringViews=function(){return u.services.$q.all(this.enteringViews.map(function(n){return n.load()})).then(r.noop)},n.prototype.updateViews=function(){var n=this.$view;this.exitingViews.forEach(function(t){return n.deactivateViewConfig(t)});this.enteringViews.forEach(function(t){return n.activateViewConfig(t)});n.sync()},n.prototype.registerHooks=function(){if(this.enteringViews.length)this.transition.onStart({},this.loadAllEnteringViews.bind(this));if(this.exitingViews.length||this.enteringViews.length)this.transition.onSuccess({},this.updateViews.bind(this))},n}();t.ViewHooks=f},function(n,t){"use strict";var i=function(){function n(n){this.transition=n}return n.prototype.registerHooks=function(){this.registerOnEnterHooks();this.registerOnRetainHooks();this.registerOnExitHooks()},n.prototype.registerOnEnterHooks=function(){var n=this;this.transition.entering().filter(function(n){return!!n.onEnter}).forEach(function(t){return n.transition.onEnter({entering:t.name},t.onEnter)})},n.prototype.registerOnRetainHooks=function(){var n=this;this.transition.retained().filter(function(n){return!!n.onRetain}).forEach(function(t){return n.transition.onRetain({retained:t.name},t.onRetain)})},n.prototype.registerOnExitHooks=function(){var n=this;this.transition.exiting().filter(function(n){return!!n.onExit}).forEach(function(t){return n.transition.onExit({exiting:t.name},t.onExit)})},n}();t.EnterExitHooks=i},function(n,t,i){"use strict";var r=i(3),f=i(5),u=i(31),e=i(5),o=i(32),s=u.ResolvePolicy[u.ResolvePolicy.LAZY],h=u.ResolvePolicy[u.ResolvePolicy.EAGER],c=function(){function n(n){this.transition=n}return n.prototype.registerHooks=function(){function t(t){return r.tail(n.to).resolveContext.resolvePath(r.extend({transition:t},{resolvePolicy:h}))}function i(t,i){var e=r.find(n.entering,f.propEq("state",t)),u=e.resolveContext,h=new o.Resolvable("$resolve$",function(){return r.map(u.getResolvables(),function(n){return n.data})}),c=r.extend({transition:i},{resolvePolicy:s});return u.resolvePathElement(e.state,c).then(function(){return h.resolveResolvable(u)}).then(function(){return u.addResolvables({$resolve$:h},e.state)})}var n=this.transition.treeChanges();t.$inject=["$transition$"];i.$inject=["$state$","$transition$"];this.transition.onStart({},t,{priority:1e3});this.transition.onEnter({entering:e.val(!0)},i,{priority:1e3})},n}();t.ResolveHooks=c},function(n,t){"use strict";(function(n){n[n.JIT=0]="JIT";n[n.LAZY=1]="LAZY";n[n.EAGER=2]="EAGER"})(t.ResolvePolicy||(t.ResolvePolicy={}));var i=t.ResolvePolicy},function(n,t,i){"use strict";var r=i(3),e=i(5),o=i(4),u=i(6),f=i(12),s=function(){function n(n,t,i){this.promise=undefined;r.extend(this,{name:n,resolveFn:t,deps:u.services.$injector.annotate(t,u.services.$injector.strictDi),data:i})}return n.prototype.resolveResolvable=function(n,t){var i=this,e;t===void 0&&(t={});var o=this,s=o.name,h=o.deps,c=o.resolveFn;f.trace.traceResolveResolvable(this,t);e=u.services.$q.defer();this.promise=e.promise;var l=n.getResolvables(null,{omitOwnLocals:[s]}),a=r.pick(l,h),v=r.map(a,function(i){return i.get(n,t)});return u.services.$q.all(v).then(function(n){try{var t=u.services.$injector.invoke(c,null,n);e.resolve(t)}catch(r){e.reject(r)}return i.promise}).then(function(n){return i.data=n,f.trace.traceResolvableResolved(i,t),i.promise})},n.prototype.get=function(n,t){return this.promise||this.resolveResolvable(n,t)},n.prototype.toString=function(){return"Resolvable(name: "+this.name+", requires: ["+this.deps+"])"},n.makeResolvables=function(t){var u=r.filter(t,e.not(o.isInjectable)),i=Object.keys(u);if(i.length)throw new Error("Invalid resolve key/value: "+i[0]+"/"+u[i[0]]);return r.map(t,function(t,i){return new n(i,t)})},n}();t.Resolvable=s},function(n,t,i){"use strict";var r=i(3),u=i(5),f=function(){function n(n){r.extend(this,n)}return n.prototype.is=function(n){return this===n||this.self===n||this.fqn()===n},n.prototype.fqn=function(){if(!this.parent||!(this.parent instanceof this.constructor))return this.name;var n=this.parent.fqn();return n?n+"."+this.name:this.name},n.prototype.root=function(){return this.parent&&this.parent.root()||this},n.prototype.parameters=function(n){n=r.defaults(n,{inherit:!0});var t=n.inherit&&this.parent&&this.parent.parameters()||[];return t.concat(r.values(this.params))},n.prototype.parameter=function(n,t){return t===void 0&&(t={}),this.url&&this.url.parameter(n,t)||r.find(r.values(this.params),u.propEq("id",n))||t.inherit&&this.parent&&this.parent.parameter(n)},n.prototype.toString=function(){return this.fqn()},n}();t.State=f},function(n,t,i){"use strict";var r=i(4),u=function(){function n(n){this._states=n}return n.prototype.isRelative=function(n){return n=n||"",n.indexOf(".")===0||n.indexOf("^")===0},n.prototype.find=function(n,t){var f,i,u;return!n&&n!==""?undefined:(f=r.isString(n),i=f?n:n.name,this.isRelative(i)&&(i=this.resolvePath(i,t)),u=this._states[i],u&&(f||!f&&(u===n||u.self===n)))?u:undefined},n.prototype.resolvePath=function(n,t){var e;if(!t)throw new Error("No reference point given for path '"+n+"'");for(var f=this.find(t),u=n.split("."),i=0,o=u.length,r=f;i<o;i++){if(u[i]===""&&i===0){r=f;continue}if(u[i]==="^"){if(!r.parent)throw new Error("Path '"+n+"' not valid for state '"+f.name+"'");r=r.parent;continue}break}return e=u.slice(i).join("."),r.name+(r.name&&e?".":"")+e},n}();t.StateMatcher=u},function(n,t,i){"use strict";var r=i(3),u=i(4),f=i(17),e=function(){function n(n,t,i){this.states=n;this.builder=t;this.$urlRouterProvider=i;this.queue=[]}return n.prototype.register=function(n){var i=this,o=i.states,e=i.queue,s=i.$state,t=r.inherit(new f.State,r.extend({},n,{self:n,resolve:n.resolve||{},toString:function(){return n.name}}));if(!u.isString(t.name))throw new Error("State must have a valid name");if(o.hasOwnProperty(t.name)||r.pluck(e,"name").indexOf(t.name)!==-1)throw new Error("State '"+t.name+"' is already defined");return e.push(t),this.$state&&this.flush(s),t},n.prototype.flush=function(n){for(var f=this,i=f.queue,u=f.states,c=f.builder,o,t,e=[],r,s={},h;i.length>0;){if(t=i.shift(),o=c.build(t),r=e.indexOf(t),o){if(u.hasOwnProperty(t.name))throw new Error("State '"+name+"' is already defined");u[t.name]=t;this.attachRoute(n,t);r>=0&&e.splice(r,1);continue}if(h=s[t.name],s[t.name]=i.length,r>=0&&h===i.length)return u;r<0&&e.push(t);i.push(t)}return u},n.prototype.autoFlush=function(n){this.$state=n;this.flush(n)},n.prototype.attachRoute=function(n,t){var i=this.$urlRouterProvider;!t[r.abstractKey]&&t.url&&i.when(t.url,["$match","$stateParams",function(i,u){n.$current.navigable===t&&r.equalForKeys(i,u)||n.transitionTo(t,i,{inherit:!0,location:!1})}])},n}();t.StateQueueManager=e},function(n,t,i){"use strict";var r=i(34),u=i(19),f=i(35),e=function(){function n(n,t){this.states={};this.matcher=new r.StateMatcher(this.states);this.builder=new u.StateBuilder(this.matcher,n);this.stateQueue=new f.StateQueueManager(this.states,this.builder,t);var i=this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0});i.navigable=null}return n.prototype.root=function(){return this._root},n.prototype.register=function(n){return this.stateQueue.register(n)},n.prototype.get=function(n,t){var r=this,i;return arguments.length===0?Object.keys(this.states).map(function(n){return r.states[n].self}):(i=this.matcher.find(n,t),i&&i.self||null)},n.prototype.decorator=function(n,t){return this.builder.builder(n,t)},n}();t.StateRegistry=e},function(n,t,i){"use strict";var u=i(3),r=i(4),l=i(8),f=i(6),s=i(38),a=i(39),h=i(43),e=i(10),c=i(27),v=i(26),o=i(21),y=i(7),p=i(3),w=i(3),b=function(){function n(t,i,r,u,f,e){this.$view=t;this.$urlRouter=i;this.$transitions=r;this.stateRegistry=u;this.stateProvider=f;this.globals=e;var o=["current","$current","params","transition"],s=Object.keys(n.prototype).filter(function(n){return o.indexOf(n)===-1});w.bindFunctions(n.prototype,this,this,s)}return Object.defineProperty(n.prototype,"transition",{get:function(){return this.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"params",{get:function(){return this.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){return this.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"$current",{get:function(){return this.globals.$current},enumerable:!0,configurable:!0}),n.prototype._handleInvalidTargetState=function(n,t){function u(){var n=a.dequeue();return n===undefined?e.Rejection.invalid(t.error()).toPromise():p(n).then(w).then(function(n){return n||u()})}var i=this,r=function(){return i.globals.transitionHistory.peekTail()},o=r(),h=s.PathFactory.makeTargetState(n),a=new l.Queue([].concat(this.stateProvider.invalidCallbacks)),v=f.services.$q,y=f.services.$injector,p=function(n){return v.when(y.invoke(n,null,{$to$:t,$from$:h}))},w=function(n){if(n instanceof c.TargetState){var t=n;return(t=i.target(t.identifier(),t.params(),t.options()),!t.valid())?e.Rejection.invalid(t.error()).toPromise():r()!==o?e.Rejection.superseded().toPromise():i.transitionTo(t.identifier(),t.params(),t.options())}};return u()},n.prototype.reload=function(n){return this.transitionTo(this.current,this.params,{reload:r.isDefined(n)?n:!0,inherit:!1,notify:!1})},n.prototype.go=function(n,t,i){var r={relative:this.$current,inherit:!0},f=u.defaults(i,r,h.defaultTransOpts);return this.transitionTo(n,t,f)},n.prototype.target=function(n,t,i){if(i===void 0&&(i={}),r.isObject(i.reload)&&!i.reload.name)throw new Error("Invalid reload state object");if(i.reloadState=i.reload===!0?this.stateRegistry.root():this.stateRegistry.matcher.find(i.reload,i.relative),i.reload&&!i.reloadState)throw new Error("No such reload state '"+(r.isString(i.reload)?i.reload:i.reload.name)+"'");var u=this.stateRegistry.matcher.find(n,i.relative);return new c.TargetState(n,u,t,i)},n.prototype.transitionTo=function(n,t,i){var y=this,e;t===void 0&&(t={});i===void 0&&(i={});e=this.globals.transitionHistory;i=u.defaults(i,h.defaultTransOpts);i=u.extend(i,{current:e.peekTail.bind(e)});var r=this.target(n,t,i),o=this.globals.successfulTransitions.peekTail(),p=function(){return s.PathFactory.bindTransNodesToPath([new a.Node(y.stateRegistry.root())])},c=o?o.treeChanges().to:p();if(!r.exists())return this._handleInvalidTargetState(c,r);if(!r.valid())return f.services.$q.reject(r.error());var l=this.$transitions.create(c,r),w=new v.TransitionManager(l,this.$transitions,this.$urlRouter,this.$view,this,this.globals),b=w.runTransition();return u.extend(b,{transition:l})},n.prototype.is=function(n,t,i){i=u.defaults(i,{relative:this.$current});var f=this.stateRegistry.matcher.find(n,i.relative);return r.isDefined(f)?this.$current!==f?!1:r.isDefined(t)&&t!==null?o.Param.equals(f.parameters(),this.params,t):!0:undefined},n.prototype.includes=function(n,t,i){var e,f,s;if(i=u.defaults(i,{relative:this.$current}),e=r.isString(n)&&y.Glob.fromString(n),e){if(!e.matches(this.$current.name))return!1;n=this.$current.name}return(f=this.stateRegistry.matcher.find(n,i.relative),s=this.$current.includes,!r.isDefined(f))?undefined:r.isDefined(s[f.name])?t?p.equalForKeys(o.Param.values(f.parameters(),t),this.params,Object.keys(t)):!0:!1},n.prototype.href=function(n,t,i){var s={lossy:!0,inherit:!0,absolute:!1,relative:this.$current},f,e;return(i=u.defaults(i,s),f=this.stateRegistry.matcher.find(n,i.relative),!r.isDefined(f))?null:(i.inherit&&(t=this.params.$inherit(t||{},this.$current,f)),e=f&&i.lossy?f.navigable:f,!e||e.url===undefined||e.url===null)?null:this.$urlRouter.href(e.url,o.Param.values(f.parameters(),t),{absolute:i.absolute})},n.prototype.get=function(n,t){return arguments.length===0?this.stateRegistry.get():this.stateRegistry.get(n,t||this.$current)},n}();t.StateService=b},function(n,t,i){"use strict";var r=i(3),u=i(5),o=i(17),e=i(39),f=i(40),s=function(){function n(){}return n.makeTargetState=function(n){var t=r.tail(n).state;return new o.TargetState(t,t,n.map(u.prop("paramValues")).reduce(r.mergeR,{}))},n.buildPath=function(n){var t=n.params();return n.$state().path.map(function(n){return new e.Node(n).applyRawParams(t)})},n.buildToPath=function(t,i){var r=n.buildPath(i);return i.options().inherit?n.inheritParams(t,r,Object.keys(i.params())):r},n.applyViewConfigs=function(n,t){return t.map(function(t){var i=r.values(t.state.views||{}),u=i.map(function(i){return n.createViewConfig(t,i)}).reduce(r.unnestR,[]);return r.extend(t,{views:u})})},n.inheritParams=function(n,t,i){function f(n,t){var i=r.find(n,u.propEq("state",t));return r.extend({},i&&i.paramValues)}i===void 0&&(i=[]);var o=u.curry(function(n,t,i){var u=r.extend({},i&&i.paramValues),h=r.pick(u,t),o,s;return u=r.omit(u,t),o=f(n,i.state)||{},s=r.extend(u,o,h),new e.Node(i.state).applyRawParams(s)});return t.map(o(n,i))},n.bindTransNodesToPath=function(n){var t=new f.ResolveContext(n);return n.forEach(function(n){n.resolveContext=t.isolateRootTo(n.state);n.resolveInjector=new f.ResolveInjector(n.resolveContext,n.state);n.resolves.$stateParams=new f.Resolvable("$stateParams",function(){return n.paramValues},n.paramValues)}),n},n.treeChanges=function(t,i,r){function k(n,t){var r=e.Node.clone(n);return r.paramValues=i[t].paramValues,r}for(var f=0,p=Math.min(t.length,i.length),w=function(n){return n.parameters({inherit:!1}).filter(u.not(u.prop("dynamic"))).map(u.prop("id"))},b=function(n,t){return n.equals(t,w(n.state))},o,s,c,l,h,a,v,y;f<p&&t[f].state!==r&&b(t[f],i[f]);)f++;return o=t,s=o.slice(0,f),c=o.slice(f),a=s.map(k),v=i.slice(f),y=a.concat(v),h=n.bindTransNodesToPath(y),l=h.slice(f),{from:o,to:h,retained:s,exiting:c,entering:l}},n.bindTransitionResolve=function(n,t){var i=n.to[0];i.resolves.$transition$=new f.Resolvable("$transition$",function(){return t},t)},n.subPath=function(n,t){var u=r.find(n,function(n){return n.state===t}),i=n.indexOf(u);if(i===-1)throw new Error("The path does not contain the state: "+t);return n.slice(0,i+1)},n.paramValues=function(n){return n.reduce(function(n,t){return r.extend(n,t.paramValues)},{})},n}();t.PathFactory=s},function(n,t,i){"use strict";var r=i(3),u=i(5),f=i(40),e=function(){function n(t){if(t instanceof n){var i=t;this.state=i.state;this.paramSchema=i.paramSchema.slice();this.paramValues=r.extend({},i.paramValues);this.resolves=r.extend({},i.resolves);this.views=i.views&&i.views.slice();this.resolveContext=i.resolveContext;this.resolveInjector=i.resolveInjector}else this.state=t,this.paramSchema=t.parameters({inherit:!1}),this.paramValues={},this.resolves=r.mapObj(t.resolve,function(n,t){return new f.Resolvable(t,n)})}return n.prototype.applyRawParams=function(n){var t=function(t){return[t.id,t.value(n[t.id])]};return this.paramValues=this.paramSchema.reduce(function(n,i){return r.applyPairs(n,t(i))},{}),this},n.prototype.parameter=function(n){return r.find(this.paramSchema,u.propEq("id",n))},n.prototype.equals=function(n,t){var i=this,f;return t===void 0&&(t=this.paramSchema.map(u.prop("id"))),f=function(t){return i.parameter(t).type.equals(i.paramValues[t],n.paramValues[t])},this.state===n.state&&t.map(f).reduce(r.allTrueR,!0)},n.clone=function(t){return new n(t)},n.matching=function(n,t){var i=n.reduce(function(n,i,r){return n===r&&r<t.length&&i.state===t[r].state?r+1:n},0);return n.slice(0,i)},n}();t.Node=e},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(31));r(i(32));r(i(41));r(i(42))},function(n,t,i){"use strict";function v(n,t){var i=s.isString(n)?n:null,r=s.isObject(n)?n:{},u=r[t.name]||i||h;return e.ResolvePolicy[u]}var r=i(3),o=i(5),s=i(4),f=i(12),u=i(6),e=i(31),c=i(3),l=i(38),h=e.ResolvePolicy[e.ResolvePolicy.LAZY],a=function(){function n(n){this._path=n;r.extend(this,{_nodeFor:function(n){return r.find(this._path,o.propEq("state",n))},_pathTo:function(n){return l.PathFactory.subPath(this._path,n)}})}return n.prototype.getResolvables=function(n,t){t=r.defaults(t,{omitOwnLocals:[]});var i=n?this._pathTo(n):this._path,u=r.tail(i);return i.reduce(function(n,i){var f=i===u?t.omitOwnLocals:[],e=r.omit(i.resolves,f);return r.extend(n,e)},{})},n.prototype.getResolvablesForFn=function(n){var t=u.services.$injector.annotate(n,u.services.$injector.strictDi);return r.pick(this.getResolvables(),t)},n.prototype.isolateRootTo=function(t){return new n(this._pathTo(t))},n.prototype.addResolvables=function(n,t){r.extend(this._nodeFor(t).resolves,n)},n.prototype.getOwnResolvables=function(n){return r.extend({},this._nodeFor(n).resolves)},n.prototype.resolvePath=function(n){var i=this,t;return n===void 0&&(n={}),f.trace.traceResolvePath(this._path,n),t=function(t){return i.resolvePathElement(t.state,n)},u.services.$q.all(r.map(this._path,t)).then(function(n){return n.reduce(c.mergeR,{})})},n.prototype.resolvePathElement=function(n,t){var o=this;t===void 0&&(t={});var s=t&&t.resolvePolicy,c=e.ResolvePolicy[s||h],l=this.getOwnResolvables(n),a=function(t){return v(n.resolvePolicy,t)>=c},i=r.filter(l,a),y=function(i){return i.get(o.isolateRootTo(n),t)},p=r.map(i,y);return f.trace.traceResolvePathElement(this,i,t),u.services.$q.all(p)},n.prototype.invokeLater=function(n,t,i){var o=this,e,s,h;return t===void 0&&(t={}),i===void 0&&(i={}),e=this.getResolvablesForFn(n),f.trace.tracePathElementInvoke(r.tail(this._path),n,Object.keys(e),r.extend({when:"Later"},i)),s=function(n){return n.get(o,i)},h=r.map(e,s),u.services.$q.all(h).then(function(){try{return o.invokeNow(n,t,i)}catch(r){return u.services.$q.reject(r)}})},n.prototype.invokeNow=function(n,t,i){var e,s;return i===void 0&&(i={}),e=this.getResolvablesForFn(n),f.trace.tracePathElementInvoke(r.tail(this._path),n,Object.keys(e),r.extend({when:"Now  "},i)),s=r.map(e,o.prop("data")),u.services.$injector.invoke(n,i.bind||null,r.extend({},t,s))},n}();t.ResolveContext=a},function(n,t,i){"use strict";var r=i(3),u=function(){function n(n,t){this._resolveContext=n;this._state=t}return n.prototype.invokeLater=function(n,t){return this._resolveContext.invokeLater(n,t)},n.prototype.invokeNow=function(n,t){return this._resolveContext.invokeNow(null,n,t)},n.prototype.getLocals=function(n){var t=this,i=function(n){return n.get(t._resolveContext)};return r.map(this._resolveContext.getResolvablesForFn(n),i)},n}();t.ResolveInjector=u},function(n,t,i){"use strict";var f=i(11),r=i(15),u;t.defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null}};u=function(){function n(n){this.$view=n;this._defaultErrorHandler=function(n){n instanceof Error&&console.error(n)};r.HookRegistry.mixin(new r.HookRegistry,this)}return n.prototype.defaultErrorHandler=function(n){return this._defaultErrorHandler=n||this._defaultErrorHandler},n.prototype.create=function(n,t){return new f.Transition(n,t,this)},n}();t.TransitionService=u},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(39));r(i(38))},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(46));r(i(22));r(i(47));r(i(48))},function(n,t,i){"use strict";function c(n,t){var i=["",""],r=n.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return r;switch(t.squash){case!1:i=["(",")"+(t.isOptional?"?":"")];break;case!0:r=r.replace(/\/$/,"");i=["(?:/(",")|/)?"];break;default:i=["("+t.squash+"|",")?"]}return r+i[0]+t.type.pattern.source+i[1]}var r=i(3),f=i(5),u=i(4),e=i(20),s=i(4),h=i(21),o=i(3),l=i(3),a=function(n,t,i){return n[t]=n[t]||i()},v=function(){function n(t,i){var a=this,l,y;this.pattern=t;this.config=i;this._cache={path:[],pattern:null};this._children=[];this._params=[];this._segments=[];this._compiled=[];this.config=r.defaults(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:r.identity});for(var v=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,s=0,h,p=[],w=function(i){if(!n.nameValidator.test(i))throw new Error("Invalid parameter name '"+i+"' in pattern '"+t+"'");if(r.find(a._params,f.propEq("id",i)))throw new Error("Duplicate parameter name '"+i+"' in pattern '"+t+"'");},b=function(n,i){var f=n[2]||n[3],u=i?n[4]:n[4]||(n[1]==="*"?".*":null);return{id:f,regexp:u,cfg:a.config.params[f],segment:t.substring(s,n.index),type:u?e.paramTypes.type(u||"string")||r.inherit(e.paramTypes.type("string"),{pattern:new RegExp(u,a.config.caseInsensitive?"i":undefined)}):null}},u,o;h=v.exec(t);){if(u=b(h,!1),u.segment.indexOf("?")>=0)break;w(u.id);this._params.push(e.Param.fromPath(u.id,u.type,this.config.paramMap(u.cfg,!1)));this._segments.push(u.segment);p.push([u.segment,r.tail(this._params)]);s=v.lastIndex}if(o=t.substring(s),l=o.indexOf("?"),l>=0&&(y=o.substring(l),o=o.substring(0,l),y.length>0))for(s=0;h=k.exec(y);)u=b(h,!0),w(u.id),this._params.push(e.Param.fromSearch(u.id,u.type,this.config.paramMap(u.cfg,!0))),s=v.lastIndex;this._segments.push(o);r.extend(this,{_compiled:p.map(function(n){return c.apply(null,n)}).concat(c(o)),prefix:this._segments[0]});Object.freeze(this)}return n.prototype.append=function(n){return this._children.push(n),r.forEach(n._cache,function(t,i){return n._cache[i]=u.isArray(t)?[]:null}),n._cache.path=this._cache.path.concat(this),n},n.prototype.isRoot=function(){return this._cache.path.length===0},n.prototype.toString=function(){return this.pattern},n.prototype.exec=function(n,t,i,u){function d(n){var t=function(n){return n.split("").reverse().join("")},i=function(n){return n.replace(/\\-/g,"-")},u=t(n).split(/-(?!\\)/),f=r.map(u,t);return r.map(f,i).reverse()}var l=this,v,h,o,e,c;if(t===void 0&&(t={}),u===void 0&&(u={}),v=a(this._cache,"pattern",function(){return new RegExp(["^",r.unnest(l._cache.path.concat(l).map(f.prop("_compiled"))).join(""),l.config.strict===!1?"/?":"","$"].join(""),l.config.caseInsensitive?"i":undefined)}).exec(n),!v)return null;var p=this.parameters(),b=p.filter(function(n){return!n.isSearch()}),k=p.filter(function(n){return n.isSearch()}),w=this._cache.path.concat(this).map(function(n){return n._segments.length-1}).reduce(function(n,t){return n+t}),y={};if(w!==v.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(h=0;h<w;h++){for(o=b[h],e=v[h+1],c=0;c<o.replace.length;c++)o.replace[c].from===e&&(e=o.replace[c].to);e&&o.array===!0&&(e=d(e));s.isDefined(e)&&(e=o.type.decode(e));y[o.id]=o.value(e)}return r.forEach(k,function(n){for(var i=t[n.id],r=0;r<n.replace.length;r++)n.replace[r].from===i&&(i=n.replace[r].to);s.isDefined(i)&&(i=n.type.decode(i));y[n.id]=n.value(i)}),i&&(y["#"]=i),y},n.prototype.parameters=function(n){return(n===void 0&&(n={}),n.inherit===!1)?this._params:r.unnest(this._cache.path.concat(this).map(f.prop("_params")))},n.prototype.parameter=function(n,t){t===void 0&&(t={});var i=r.tail(this._cache.path);return r.find(this._params,f.propEq("id",n))||t.inherit!==!1&&i&&i.parameter(n)||null},n.prototype.validates=function(n){var t=this,i=function(n,t){return!n||n.validates(t)};return r.pairs(n||{}).map(function(n){var r=n[0],u=n[1];return i(t.parameter(r),u)}).reduce(r.allTrueR,!0)},n.prototype.format=function(t){function e(n){var i=n.value(t[n.id]),r=n.isDefaultValue(i),u=r?n.squash:!1,f=n.type.encode(i);return{param:n,value:i,isDefaultValue:r,squash:u,encoded:f}}var s,i;if(t===void 0&&(t={}),!this.validates(t))return null;var f=this._cache.path.slice().concat(this),h=f.map(n.pathSegmentsAndParams).reduce(o.unnestR,[]),c=f.map(n.queryParams).reduce(o.unnestR,[]);return s=h.reduce(function(t,i){if(u.isString(i))return t+i;var s=e(i),o=s.squash,f=s.encoded,h=s.param;return o===!0?t.match(/\/$/)?t.slice(0,-1):t:u.isString(o)?t+o:o!==!1?t:f==null?t:u.isArray(f)?t+r.map(f,n.encodeDashes).join("-"):h.type.raw?t+f:t+encodeURIComponent(f)},""),i=c.map(function(n){var i=e(n),f=i.squash,t=i.encoded,o=i.isDefaultValue;if(t!=null&&(!o||f===!1))return(u.isArray(t)||(t=[t]),t.length===0)?void 0:(n.type.raw||(t=r.map(t,encodeURIComponent)),t.map(function(t){return n.id+"="+t}))}).filter(r.identity).reduce(o.unnestR,[]).join("&"),s+(i?"?"+i:"")+(t["#"]?"#"+t["#"]:"")},n.encodeDashes=function(n){return encodeURIComponent(n).replace(/-/g,function(n){return"%5C%"+n.charCodeAt(0).toString(16).toUpperCase()})},n.pathSegmentsAndParams=function(n){var t=n._segments,i=n._params.filter(function(n){return n.location===h.DefType.PATH});return l.arrayTuples(t,i.concat(undefined)).reduce(o.unnestR,[]).filter(function(n){return n!==""&&s.isDefined(n)})},n.queryParams=function(n){return n._params.filter(function(n){return n.location===h.DefType.SEARCH})},n.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,n}();t.UrlMatcher=v},function(n,t,i){"use strict";function o(){return{strict:r.matcherConfig.strictMode(),caseInsensitive:r.matcherConfig.caseInsensitive()}}var e=i(3),u=i(4),r=i(45),f=i(20),s=function(){function n(){e.extend(this,{UrlMatcher:r.UrlMatcher,Param:f.Param})}return n.prototype.caseInsensitive=function(n){return r.matcherConfig.caseInsensitive(n)},n.prototype.strictMode=function(n){return r.matcherConfig.strictMode(n)},n.prototype.defaultSquashPolicy=function(n){return r.matcherConfig.defaultSquashPolicy(n)},n.prototype.compile=function(n,t){return new r.UrlMatcher(n,e.extend(o(),t))},n.prototype.isMatcher=function(n){if(!u.isObject(n))return!1;var t=!0;return e.forEach(r.UrlMatcher.prototype,function(i,r){u.isFunction(i)&&(t=t&&u.isDefined(n[r])&&u.isFunction(n[r]))}),t},n.prototype.type=function(n,t,i){var r=f.paramTypes.type(n,t,i);return u.isDefined(t)?this:r},n.prototype.$get=function(){return f.paramTypes.enqueue=!1,f.paramTypes._flushTypeQueue(),this},n}();t.UrlMatcherFactory=s},function(n,t,i){"use strict";function c(n){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(n.source);return t!=null?t[1].replace(/\\(.)/g,"$1"):""}function l(n,t){return n.replace(/\$(\$|\d{1,2})/,function(n,i){return t[i==="$"?0:Number(i)]})}function o(n,t,i,r){if(!r)return!1;var f=n.invoke(i,i,{$match:r,$stateParams:t});return u.isDefined(f)?f:!0}function a(n,t,i){var r=f.services.locationConfig.baseHref();return r==="/"?n:t?r.slice(0,-1)+n:i?r.slice(1)+n:n}function s(n,t,i){function o(n){var t=n(f.services.$injector,r);return t?(u.isString(t)&&(r.replace(),r.url(t)),!0):!1}if(!i||!i.defaultPrevented){for(var s=n.length,e=0;e<s;e++)if(o(n[e]))return;t&&o(t)}}var e=i(3),u=i(4),f=i(6),r=f.services.location,v=function(){function n(n,t){this.$urlMatcherFactory=n;this.$stateParams=t;this.rules=[];this.otherwiseFn=null;this.interceptDeferred=!1}return n.prototype.rule=function(n){if(!u.isFunction(n))throw new Error("'rule' must be a function");return this.rules.push(n),this},n.prototype.otherwise=function(n){if(!u.isFunction(n)&&!u.isString(n))throw new Error("'rule' must be a string or function");return this.otherwiseFn=u.isString(n)?function(){return n}:n,this},n.prototype.when=function(n,t){var y=this,s=y.$urlMatcherFactory,p=y.$stateParams,i,h=u.isString(t),w,a,v;if(u.isString(n)&&(n=s.compile(n)),!h&&!u.isFunction(t)&&!u.isArray(t))throw new Error("invalid 'handler' in when()");w={matcher:function(n,t){return h&&(i=s.compile(t),t=["$match",i.format.bind(i)]),e.extend(function(){return o(f.services.$injector,p,t,n.exec(r.path(),r.search(),r.hash()))},{prefix:u.isString(n.prefix)?n.prefix:""})},regex:function(n,t){if(n.global||n.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(i=t,t=["$match",function(n){return l(i,n)}]),e.extend(function(){return o(f.services.$injector,p,t,n.exec(r.path()))},{prefix:c(n)})}};a={matcher:s.isMatcher(n),regex:n instanceof RegExp};for(v in a)if(a[v])return this.rule(w[v](n,t));throw new Error("invalid 'what' in when()");},n.prototype.deferIntercept=function(n){n===undefined&&(n=!0);this.interceptDeferred=n},n}(),h;t.UrlRouterProvider=v;h=function(){function n(t){this.urlRouterProvider=t;e.bindFunctions(n.prototype,this,this)}return n.prototype.sync=function(){s(this.urlRouterProvider.rules,this.urlRouterProvider.otherwiseFn)},n.prototype.listen=function(){var n=this;return this.listener=this.listener||r.onChange(function(t){return s(n.urlRouterProvider.rules,n.urlRouterProvider.otherwiseFn,t)})},n.prototype.update=function(n){if(n){this.location=r.url();return}r.url()!==this.location&&(r.url(this.location),r.replace())},n.prototype.push=function(n,t,i){r.url(n.format(t||{}));i&&i.replace&&r.replace()},n.prototype.href=function(n,t,i){var r,u,o,s,e;return n.validates(t)?(r=n.format(t),i=i||{},u=f.services.locationConfig,o=u.html5Mode(),o||r===null||(r="#"+u.hashPrefix()+r),r=a(r,o,i.absolute),!i.absolute||!r)?r:(s=!o&&r?"/":"",e=u.port(),e=e===80||e===443?"":":"+e,[u.protocol(),"://",u.host(),e,s,r].join("")):null},n}();t.UrlRouter=h},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}r(i(50))},function(n,t,i){"use strict";var u=i(3),f=i(5),e=i(4),r=i(2),s=function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(t){return i.reduce(function(i,r){return i&&n[r]===t[r]},!0)}},o=function(){function n(){var n=this;this.uiViews=[];this.viewConfigs=[];this._viewConfigFactories={};this.sync=function(){function e(n){return n.fqn.split(".").length}function o(n){for(var t=n.viewDecl.$context,i=0;++i&&t.parent;)t=t.parent;return i}var i=n.uiViews.map(function(n){return[n.fqn,n]}).reduce(u.applyPairs,{}),r=function(n){return function(t){if(n.$type!==t.viewDecl.$type)return!1;var f=t.viewDecl,r=f.$uiViewName.split("."),e=n.fqn.split(".");if(!u.equals(r,e.slice(0-r.length)))return!1;var s=1-r.length||undefined,h=e.slice(0,s).join("."),o=i[h].creationContext;return f.$uiViewContextAnchor===(o&&o.name)}},t=f.curry(function(n,t,i,r){return t*(n(i)-n(r))}),s=function(i){var u=n.viewConfigs.filter(r(i));return u.length>1&&u.sort(t(o,-1)),[i,u[0]]},h=function(t){var i=t[0],r=t[1];n.uiViews.indexOf(i)!==-1&&i.configUpdated(r)};n.uiViews.sort(t(e,1)).map(s).forEach(h)}}return n.prototype.rootContext=function(n){return this._rootContext=n||this._rootContext},n.prototype.viewConfigFactory=function(n,t){this._viewConfigFactories[n]=t},n.prototype.createViewConfig=function(n,t){var r=this._viewConfigFactories[t.$type],i;if(!r)throw new Error("ViewService: No view config factory registered for type "+t.$type);return i=r(n,t),e.isArray(i)?i:[i]},n.prototype.deactivateViewConfig=function(n){r.trace.traceViewServiceEvent("<- Removing",n);u.removeFrom(this.viewConfigs,n)},n.prototype.activateViewConfig=function(n){r.trace.traceViewServiceEvent("-> Registering",n);this.viewConfigs.push(n)},n.prototype.registerUiView=function(n){r.trace.traceViewServiceUiViewEvent("-> Registering",n);var t=this.uiViews,i=function(t){return t.fqn===n.fqn};return t.filter(i).length&&r.trace.traceViewServiceUiViewEvent("!!!! duplicate uiView named:",n),t.push(n),this.sync(),function(){var i=t.indexOf(n);if(i<=0){r.trace.traceViewServiceUiViewEvent("Tried removing non-registered uiView",n);return}r.trace.traceViewServiceUiViewEvent("<- Deregistering",n);u.removeFrom(t)(n)}},n.prototype.available=function(){return this.uiViews.map(f.prop("fqn"))},n.prototype.active=function(){return this.uiViews.filter(f.prop("$config")).map(f.prop("name"))},n.normalizeUiViewTarget=function(n,t){var o,s;t===void 0&&(t="");var u=t.split("@"),i=u[0]||"$default",r=e.isString(u[1])?u[1]:"^",f=/^(\^(?:\.\^)*)\.(.*$)/.exec(i);return f&&(r=f[1],i=f[2]),i.charAt(0)==="!"&&(i=i.substr(1),r=""),o=/^(\^(?:\.\^)*)$/,o.exec(r)&&(s=r.split(".").reduce(function(n){return n.parent},n),r=s.name),{uiViewName:i,uiViewContextAnchor:r}},n}();t.ViewService=o},function(n,t,i){"use strict";var u=i(25),r=i(8),f=i(3),e=function(){function n(n){var t=this,i;this.params=new u.StateParams;this.transitionHistory=new r.Queue([],1);this.successfulTransitions=new r.Queue([],1);i=function(n){var r,i;t.transition=n;t.transitionHistory.enqueue(n);r=function(){t.successfulTransitions.enqueue(n);t.$current=n.$to();t.current=t.$current.self;f.copy(n.params(),t.params)};n.onSuccess({},r,{priority:1e4});i=function(){t.transition===n&&(t.transition=null)};n.promise.then(i,i)};n.onBefore({},["$transition$",i])}return n}();t.UIRouterGlobals=e},function(n,t,i){"use strict";var r=i(47),u=i(48),f=i(18),e=i(48),o=i(43),s=i(50),h=i(36),c=i(37),l=i(51),a=function(){function n(){this.viewService=new s.ViewService;this.transitionService=new o.TransitionService(this.viewService);this.globals=new l.UIRouterGlobals(this.transitionService);this.urlMatcherFactory=new r.UrlMatcherFactory;this.urlRouterProvider=new u.UrlRouterProvider(this.urlMatcherFactory,this.globals.params);this.urlRouter=new e.UrlRouter(this.urlRouterProvider);this.stateRegistry=new h.StateRegistry(this.urlMatcherFactory,this.urlRouterProvider);this.stateProvider=new f.StateProvider(this.stateRegistry);this.stateService=new c.StateService(this.viewService,this.urlRouter,this.transitionService,this.stateRegistry,this.stateProvider,this.globals);this.viewService.rootContext(this.stateRegistry.root());this.globals.$current=this.stateRegistry.root();this.globals.current=this.globals.$current.self}return n}();t.UIRouter=a},function(n,t,i){"use strict";function v(n){var t=u.services.$injector,f=t.get("$controller"),i=t.instantiate,r;try{return t.instantiate=function(n){t.instantiate=i;r=t.annotate(n)},f(n,{$scope:{}}),r}finally{t.instantiate=i}}function y(n,t){u.services.$injector=n;u.services.$q=t}function p(n){function i(i,e,o,h,c,l){return h.$on("$locationChangeSuccess",function(n){return t.forEach(function(t){return t(n)})}),u.services.locationConfig.html5Mode=function(){var t=n.html5Mode();return t=k.isObject(t)?t.enabled:t,t&&o.history},u.services.template.get=function(n){return c.get(n,{cache:l,headers:{Accept:"text/html"}}).then(s.prop("data"))},f.bindFunctions(i,u.services.location,i,["replace","url","path","search","hash"]),f.bindFunctions(i,u.services.locationConfig,i,["port","protocol","host"]),f.bindFunctions(e,u.services.locationConfig,e,["baseHref"]),r}r=new b.UIRouter;r.stateRegistry.decorator("views",a.ng1ViewsBuilder);r.stateRegistry.decorator("resolve",g.ng1ResolveBuilder);r.viewService.viewConfigFactory("ng1",a.ng1ViewConfigFactory);f.bindFunctions(n,u.services.locationConfig,n,["hashPrefix"]);var t=[];u.services.location.onChange=function(n){return t.push(n),function(){return f.removeFrom(t)(n)}};this.$get=i;i.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"]}function tt(){return r.urlRouterProvider.$get=function(){return r.urlRouter.update(!0),this.interceptDeferred||r.urlRouter.listen(),r.urlRouter},r.urlRouterProvider}function it(){return r.stateProvider.$get=function(){return r.stateRegistry.stateQueue.autoFlush(r.stateService),r.stateService},r.stateProvider}function rt(){function n(n){var t=function(t){function o(){}var i=f.find(n.treeChanges().to,s.propEq("state",t.viewDecl.$context));if(!i)return u.services.$q.when();var r=i.resolveContext,h=v(t.controller),e=r.getResolvables();return o.$inject=h.filter(function(n){return e.hasOwnProperty(n)}),r.invokeLater(o).then(function(){return t.locals=f.map(e,function(n){return n.data})})},i=n.views("entering").filter(function(n){return!!n.controller}).map(t);return u.services.$q.all(i).then(f.noop)}n.$inject=["$transition$"];r.transitionService.onFinish({},n);return r.transitionService.$get=function(){return r.transitionService},r.transitionService}function o(n){n.$watch(function(){l.trace.approximateDigests++})}var b=i(52),u=i(6),f=i(3),s=i(5),k=i(4),h=i(44),e=i(40),c=i(17),l=i(12),a=i(54),d=i(55),g=i(56),nt=angular.module("ui.router.angular1",[]),r,w;angular.module("ui.router.util",["ng","ui.router.init"]);angular.module("ui.router.router",["ui.router.util"]);angular.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]);angular.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]);angular.module("ui.router.compat",["ui.router"]);t.annotateController=v;y.$inject=["$injector","$q"];nt.run(y);r=null;p.$inject=["$locationProvider"];w=function(){return{resolve:function(n,t,i){var o;t===void 0&&(t={});var s=new h.Node(new c.State({params:{}})),u=new h.Node(new c.State({params:{}})),r=new e.ResolveContext([s,u]);return r.addResolvables(e.Resolvable.makeResolvables(n),u.state),o=function(n){var i=function(n){return e.Resolvable.makeResolvables(f.map(n,function(n){return function(){return n}}))};return r.addResolvables(i(n),s.state),r.addResolvables(i(t),u.state),r.resolvePath()},i?i.then(o):o({})}}};angular.module("ui.router.init",[]).provider("ng1UIRouter",p);angular.module("ui.router.init").run(["ng1UIRouter",function(){}]);angular.module("ui.router.util").provider("$urlMatcherFactory",["ng1UIRouterProvider",function(){return r.urlMatcherFactory}]);angular.module("ui.router.util").run(["$urlMatcherFactory",function(){}]);angular.module("ui.router.router").provider("$urlRouter",["ng1UIRouterProvider",tt]);angular.module("ui.router.router").run(["$urlRouter",function(){}]);angular.module("ui.router.state").provider("$state",["ng1UIRouterProvider",it]);angular.module("ui.router.state").run(["$state",function(){}]);angular.module("ui.router.state").factory("$stateParams",["ng1UIRouter",function(n){return n.globals.params}]);angular.module("ui.router.state").provider("$transitions",["ng1UIRouterProvider",rt]);angular.module("ui.router.util").factory("$templateFactory",["ng1UIRouter",function(){return new d.TemplateFactory}]);angular.module("ui.router").factory("$view",function(){return r.viewService});angular.module("ui.router").factory("$resolve",w);angular.module("ui.router").service("$trace",function(){return l.trace});o.$inject=["$rootScope"];t.watchDigests=o;angular.module("ui.router").run(o)},function(n,t,i){"use strict";function v(n){var i=["component","bindings"],t=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),e=i.concat(t),f={},s=n.views||{$default:u.pick(n,e)};return u.forEach(s,function(e,s){if(s=s||"$default",r.isString(e)&&(e={component:e}),Object.keys(e).length){if(e.component){if(t.map(function(n){return r.isDefined(e[n])}).reduce(u.anyTrueR,!1))throw new Error("Cannot combine: "+i.join("|")+" with: "+t.join("|")+" in stateview: 'name@"+n.name+"'");e.templateProvider=["$injector",function(n){var r=function(n){return e.bindings&&e.bindings[n]||n},t=angular.version.minor>=3?"::":"",u=function(n){var i=o.kebobString(n.name),u=r(n.name);return n.type==="@"?i+"='{{"+t+"$resolve."+u+"}}'":i+"='"+t+"$resolve."+u+"'"},f=y(n,e.component).map(u).join(" "),i=o.kebobString(e.component);return"<"+i+" "+f+"><\/"+i+">"}]}e.resolveAs=e.resolveAs||"$resolve";e.$type="ng1";e.$context=n;e.$name=s;var c=h.ViewService.normalizeUiViewTarget(e.$context,e.$name);e.$uiViewName=c.uiViewName;e.$uiViewContextAnchor=c.uiViewContextAnchor;f[s]=e}}),f}function y(n,t){var i=n.get(t+"Directive");if(!i||!i.length)throw new Error("Unable to find component named '"+t+"'");return i.map(s).reduce(u.unnestR,[])}var u=i(3),o=i(9),h=i(50),r=i(4),c=i(6),l=i(12),a=i(55),f,s,e;t.ng1ViewConfigFactory=function(n,t){return new e(n,t)};t.ng1ViewsBuilder=v;f=function(n){return Object.keys(n||{}).map(function(t){return[t,/^([=<@])[?]?(.*)/.exec(n[t])]}).filter(function(n){return r.isDefined(n)&&r.isDefined(n[1])}).map(function(n){return{name:n[1][2]||n[0],type:n[1][1]}})};s=function(n){return r.isObject(n.bindToController)?f(n.bindToController):f(n.scope)};e=function(){function n(n,t){this.node=n;this.viewDecl=t;this.loaded=!1}return n.prototype.load=function(){var n=this,t=c.services.$q;if(!this.hasTemplate())throw new Error("No template configuration specified for '"+this.viewDecl.$uiViewName+"@"+this.viewDecl.$uiViewContextAnchor+"'");var i=this.node.resolveContext,r=this.node.paramValues,u={template:t.when(this.getTemplate(r,new a.TemplateFactory,i)),controller:t.when(this.getController(i))};return t.all(u).then(function(t){l.trace.traceViewServiceEvent("Loaded",n);n.controller=t.controller;n.template=t.template})},n.prototype.hasTemplate=function(){return!!(this.viewDecl.template||this.viewDecl.templateUrl||this.viewDecl.templateProvider)},n.prototype.getTemplate=function(n,t,i){return t.fromConfig(this.viewDecl,n,i.invokeLater.bind(i))},n.prototype.getController=function(n){var t=this.viewDecl.controllerProvider;return r.isInjectable(t)?n.invokeLater(t,{}):this.viewDecl.controller},n}();t.Ng1ViewConfig=e},function(n,t,i){"use strict";var r=i(4),u=i(6),f=function(){function n(){}return n.prototype.fromConfig=function(n,t,i){return r.isDefined(n.template)?this.fromString(n.template,t):r.isDefined(n.templateUrl)?this.fromUrl(n.templateUrl,t):r.isDefined(n.templateProvider)?this.fromProvider(n.templateProvider,t,i):null},n.prototype.fromString=function(n,t){return r.isFunction(n)?n(t):n},n.prototype.fromUrl=function(n,t){return(r.isFunction(n)&&(n=n(t)),n==null)?null:u.services.template.get(n)},n.prototype.fromProvider=function(n,t,i){return i(n)},n}();t.TemplateFactory=f},function(n,t,i){"use strict";function f(n){var t={};return r.forEach(n.resolve||{},function(n,i){t[i]=u.isString(n)?[n,function(n){return n}]:n}),t}var r=i(3),u=i(4);t.ng1ResolveBuilder=f},function(n,t,i){"use strict";function f(n,t){var r=n.match(/^\s*({[^}]*})\s*$/),i;if(r&&(n=t+"("+r[1]+")"),i=n.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!i||i.length!==4)throw new Error("Invalid state ref '"+n+"'");return{state:i[1],paramExpr:i[3]||null}}function e(n){var i=n.parent().inheritedData("$uiView"),t=c.parse("$cfg.node.state")(i);return t&&t.name?t:undefined}function o(n){var i=Object.prototype.toString.call(n.prop("href"))==="[object SVGAnimatedString]",t=n[0].nodeName==="FORM";return{attr:t?"action":i?"xlink:href":"href",isAnchor:n.prop("tagName").toUpperCase()==="A",clickable:!t}}function s(n,t,i,r,u){return function(f){var h=f.which||f.button,e=u(),o,s;h>1||f.ctrlKey||f.metaKey||f.shiftKey||n.attr("target")||(o=i(function(){t.go(e.state,e.params,e.options)}),f.preventDefault(),s=r.isAnchor&&!e.href?1:0,f.preventDefault=function(){s--<=0&&i.cancel(o)})}}function l(n,t){return{relative:e(n)||t.$current,inherit:!0}}var u=i(3),r=i(4),c=i(5),a=["$state","$timeout",function(n,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,r,e,h){var a=f(e.uiSref,n.current.name),c={state:a.state,href:null,params:null,options:null},v=o(r),w=h[1]||h[0],y=null,p;(c.options=u.extend(l(r,n),e.uiSrefOpts?i.$eval(e.uiSrefOpts):{}),p=function(t){t&&(c.params=angular.copy(t));c.href=n.href(a.state,c.params,c.options);y&&y();w&&(y=w.$$addStateInfo(a.state,c.params));c.href!==null&&e.$set(v.attr,c.href)},a.paramExpr&&(i.$watch(a.paramExpr,function(n){n!==c.params&&p(n)},!0),c.params=angular.copy(i.$eval(a.paramExpr))),p(),v.clickable)&&r.bind("click",s(r,n,t,v,function(){return c}))}}}],v=["$state","$timeout",function(n,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,r,u,f){function v(t){e.state=t[0];e.params=t[1];e.options=t[2];e.href=n.href(e.state,e.params,e.options);c&&c();l&&(c=l.$$addStateInfo(e.state,e.params));e.href&&u.$set(h.attr,e.href)}var h=o(r),l=f[1]||f[0],y=[u.uiState,u.uiStateParams||null,u.uiStateOpts||null],a="["+y.map(function(n){return n||"null"}).join(", ")+"]",e={state:null,params:null,options:null,href:null},c=null;(i.$watch(a,v,!0),v(i.$eval(a)),h.clickable)&&r.bind("click",s(r,n,t,h,function(){return e}))}}}],h=["$state","$stateParams","$interpolate","$transitions",function(n,t,i,o){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,s,h,c){function k(t,i,r){var o=n.get(t,e(s)),u=nt(t,i),f={state:o||{name:t},params:i,hash:u};return l.push(f),y[u]=r,function(){var n=l.indexOf(f);n!==-1&&l.splice(n,1)}}function nt(n,i){if(!r.isString(n))throw new Error("state should be a string");return r.isObject(i)?n+u.toJson(i):(i=t.$eval(i),r.isObject(i))?n+u.toJson(i):n}function v(){for(var n=0;n<l.length;n++)tt(l[n].state,l[n].params)?d(s,y[l[n].hash]):g(s,y[l[n].hash]),it(l[n].state,l[n].params)?d(s,p):g(s,p)}function d(n,t){c(function(){n.addClass(t)})}function g(n,t){n.removeClass(t)}function tt(t,i){return n.includes(t.name,i)}function it(t,i){return n.is(t.name,i)}var l=[],y={},p,a,w,b;p=i(h.uiSrefActiveEq||"",!1)(t);try{a=t.$eval(h.uiSrefActive)}catch(rt){}a=a||i(h.uiSrefActive||"",!1)(t);r.isObject(a)&&u.forEach(a,function(i,u){if(r.isString(i)){var e=f(i,n.current.name);k(e.state,t.$eval(e.paramExpr),u)}});this.$$addStateInfo=function(n,t){if(!r.isObject(a)||!(l.length>0)){var i=k(n,t,a);return v(),i}};t.$on("$stateChangeSuccess",v);w=["$transition$",function(n){n.promise.then(v)}];b=o.onStart({},w);t.$on("$destroy",b);v()}]}}];angular.module("ui.router.state").directive("uiSref",a).directive("uiSrefActive",h).directive("uiSrefActiveEq",h).directive("uiState",v)},function(n,t){"use strict";function i(n){var t=function(t,i,r){return n.is(t,i,r)};return t.$stateful=!0,t}function r(n){var t=function(t,i,r){return n.includes(t,i,r)};return t.$stateful=!0,t}i.$inject=["$state"];t.$IsStateFilter=i;r.$inject=["$state"];t.$IncludedByStateFilter=r;angular.module("ui.router.state").filter("isState",i).filter("includedByState",r)},function(n,t,i){"use strict";function o(n,t,i){var o=e.parse("viewDecl.controllerAs"),s=e.parse("viewDecl.resolveAs"),c=e.parse("node.resolveContext");return{restrict:"ECA",priority:-400,compile:function(e){var l=e.html();return function(e,v){var w=v.data("$uiView"),y,p;if(w){y=w.$cfg||{viewDecl:{}};v.html(y.template||l);r.trace.traceUiViewFill(w.$uiView,v.html());var it=n(v.contents()),d=y.controller,b=o(y),g=s(y),nt=c(y),k=nt&&u.map(nt.getResolvables(),function(n){return n.data});if(e[g]=k,d&&(p=t(d,u.extend({},k,{$scope:e,$element:v})),b&&(e[b]=p,e[b][g]=k),v.data("$ngControllerController",p),v.children().data("$ngControllerController",p),h(i,p,e,y)),f.isString(y.viewDecl.component))var tt=y.viewDecl.component,rt=a.kebobString(tt),ut=function(){var n=[].slice.call(v[0].children).filter(function(n){return n&&n.tagName&&n.tagName.toLowerCase()===rt});return n&&angular.element(n).data("$"+tt+"Controller")},ft=e.$watch(ut,function(n){n&&(h(i,n,e,y),ft())});it(e)}}}}}function h(n,t,i,r){var e,o,h,c;!f.isFunction(t.$onInit)||r.viewDecl.component&&s||t.$onInit();e={bind:t};f.isFunction(t.uiOnParamsChanged)&&(o=function(n){var s=r.node.resolveContext,h=s.getResolvables().$transition$.data,o;if(n!==h&&n.exiting().indexOf(r.node.state.self)===-1){var i=n.params("to"),c=n.params("from"),l=n.treeChanges().to.map(function(n){return n.paramSchema}).reduce(u.unnestR,[]),f=n.treeChanges().from.map(function(n){return n.paramSchema}).reduce(u.unnestR,[]),e=l.filter(function(n){var t=f.indexOf(n);return t===-1||!f[t].type.equals(i[n.id],c[n.id])});e.length&&(o=e.map(function(n){return n.id}),t.uiOnParamsChanged(u.filter(i,function(n,t){return o.indexOf(t)!==-1}),n))}},i.$on("$destroy",n.onSuccess({},["$transition$",o]),e),h=function(n,t){n.type===l.RejectType.IGNORED&&o(t)},i.$on("$destroy",n.onError({},["$error$","$transition$",h]),e));f.isFunction(t.uiCanExit)&&(c={exiting:r.node.state.name},i.$on("$destroy",n.onBefore(c,t.uiCanExit,e)))}var u=i(3),f=i(4),r=i(12),c=i(54),l=i(10),e=i(5),a=i(9),v=["$view","$animate","$uiViewScroll","$interpolate","$q",function(n,t,i,u,o){function h(){return{enter:function(n,i,r){angular.version.minor>2?t.enter(n,null,i).then(r):t.enter(n,null,i,r)},leave:function(n,i){angular.version.minor>2?t.leave(n).then(i):t.leave(n,i)}}}function l(n,t){return n===t}var a={$cfg:{viewDecl:{$context:n.rootContext()}},$uiView:{}},s={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(t,v,y){return function(t,v,p){function ot(n){(!n||n instanceof c.Ng1ViewConfig)&&(l(nt,n)||(r.trace.traceUiViewConfigUpdated(b,n&&n.viewDecl&&n.viewDecl.$context),nt=n,ft(n)))}function st(){if(k&&(r.trace.traceUiViewEvent("Removing (previous) el",k.data("$uiView")),k.remove(),k=null),w&&(r.trace.traceUiViewEvent("Destroying scope",b),w.$destroy(),w=null),d){var n=d.data("$uiView");r.trace.traceUiViewEvent("Animate out",n);ut.leave(d,function(){n.$$animLeave.resolve();k=null});k=d;d=null}}function ft(n){var u=t.$new();r.trace.traceUiViewScopeCreated(b,u);var e=o.defer(),s=o.defer(),h={$cfg:n,$uiView:b,$animEnter:e.promise,$animLeave:s.promise,$$animLeave:s},c=y(u,function(n){ut.enter(n.data("$uiView",h),v,function(){e.resolve();w&&w.$emit("$viewContentAnimationEnded");(f.isDefined(g)&&!g||t.$eval(g))&&i(n)});st()});d=c;w=u;w.$emit("$viewContentLoaded",n||nt);w.$eval(et)}var k,d,w,rt,et=p.onload||"",g=p.autoscroll,ut=h(p,t),nt=undefined,tt=v.inheritedData("$uiView")||a,it=u(p.uiView||p.name||"")(t)||"$default",b={$type:"ng1",id:s.count++,name:it,fqn:tt.$uiView.fqn?tt.$uiView.fqn+"."+it:it,config:null,configUpdated:ot,get creationContext(){return e.parse("$cfg.viewDecl.$context")(tt)}};r.trace.traceUiViewEvent("Linking",b);v.data("$uiView",{$uiView:b});ft();rt=n.registerUiView(b);t.$on("$destroy",function(){r.trace.traceUiViewEvent("Destroying/Unregistering",b);rt()})}}};return s}],s;o.$inject=["$compile","$controller","$transitions","$view","$timeout"];s=typeof angular.module("ui.router").component=="function";angular.module("ui.router.state").directive("uiView",v);angular.module("ui.router.state").directive("uiView",o)},function(){"use strict";function n(){var n=!1;this.useAnchorScroll=function(){n=!0};this.$get=["$anchorScroll","$timeout",function(t,i){return n?t:function(n){return i(function(){n[0].scrollIntoView()},0,!1)}}]}angular.module("ui.router.state").provider("$uiViewScroll",n)}])});